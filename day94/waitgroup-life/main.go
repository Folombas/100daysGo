package main

import (
	"fmt"
	"sync"
	"time"
)

// –ì–æ—Ä—É—Ç–∏–Ω–∞ –¥–µ–ø—Ä–µ—Å—Å–∏–∏ –∏ —Å–æ–º–Ω–µ–Ω–∏–π
func depressionRoutine(wg *sync.WaitGroup) {
	defer wg.Done()
	fmt.Println("üíÄ –ì–æ—Ä—É—Ç–∏–Ω–∞ –¥–µ–ø—Ä–µ—Å—Å–∏–∏: '–ó–∞—á–µ–º –≤—Å—ë —ç—Ç–æ? –ú–æ–∂–µ—Ç, –ª—É—á—à–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å CapCut?'")
	time.Sleep(2 * time.Second)
	fmt.Println("‚úÖ –î–µ–ø—Ä–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –ì–æ—à–∞ –ø—Ä–∏–Ω—è–ª —Ä–µ—à–µ–Ω–∏–µ —É—á–∏—Ç—å—Å—è!")
}

// –ì–æ—Ä—É—Ç–∏–Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Ç—Ä–µ–≤–æ–≥–∏
func financialAnxietyRoutine(wg *sync.WaitGroup) {
	defer wg.Done()
	fmt.Println("üí∞ –ì–æ—Ä—É—Ç–∏–Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤: '–°–Ω–æ–≤–∞ 400 —Ä—É–±–ª–µ–π –∑–∞ –¥–æ—Å—Ç–∞–≤–∫—É...'")
	time.Sleep(3 * time.Second)
	fmt.Println("‚úÖ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è: –¢–æ–ª—å–∫–æ Go –¥–∞—Å—Ç 150–∫+!")
}

// –ì–æ—Ä—É—Ç–∏–Ω–∞ –ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏–∏
func procrastinationRoutine(wg *sync.WaitGroup) {
	defer wg.Done()
	fmt.Println("üì± –ì–æ—Ä—É—Ç–∏–Ω–∞ –ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏–∏: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ü—Å–µ—Ç–∏... –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–µ–º—ã...'")
	time.Sleep(4 * time.Second)
	fmt.Println("‚úÖ –ü—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏—è –ø–æ–±–µ–∂–¥–µ–Ω–∞: –¢–µ–ª–µ—Ñ–æ–Ω –æ—Ç–ª–æ–∂–µ–Ω!")
}

// –ì–æ—Ä—É—Ç–∏–Ω–∞ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–≥–æ –∑—É–¥–∞
func creativeItchRoutine(wg *sync.WaitGroup) {
	defer wg.Done()
	fmt.Println("üé¨ –ì–æ—Ä—É—Ç–∏–Ω–∞ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞: '–•–æ—á–µ—Ç—Å—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ –ø—Ä–æ –æ—Ç–ø—É—Å–∫ –Ω–∞ –§–∏–ª–∏–ø–ø–∏–Ω–∞—Ö –ª–µ—Ç–æ–º 2019 –≥–æ–¥–∞!'")
	time.Sleep(2 * time.Second)
	fmt.Println("‚úÖ –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ –æ—Ç–ª–æ–∂–µ–Ω–æ: –°–Ω–∞—á–∞–ª–∞ Go, –ø–æ—Ç–æ–º CapCut!")
}

// –ì–ª–∞–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ - –∏–∑—É—á–µ–Ω–∏–µ Go
func studyGoRoutine() {
	fmt.Println("\nüöÄ –ó–ê–ü–£–°–ö –ì–õ–ê–í–ù–û–ô –ì–û–†–£–¢–ò–ù–´: –ò–ó–£–ß–ï–ù–ò–ï GO!")
	fmt.Println("========================================")

	lessons := []string{
		"üìö WaitGroups –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è",
		"üìö –ö–∞–Ω–∞–ª—ã –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è",
		"üìö –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã –∏ –æ—Ç–º–µ–Ω–∞",
		"üìö –ú—å—é—Ç–µ–∫—Å—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å",
		"üìö –ü–∞–∫–µ—Ç sync –≤ –¥–µ—Ç–∞–ª—è—Ö",
	}

	for i, lesson := range lessons {
		fmt.Printf("–£—Ä–æ–∫ %d: %s\n", i+1, lesson)
		time.Sleep(1 * time.Second)
	}

	fmt.Println("\nüéâ –ì–û–®–ê –ü–†–û–®–Å–õ –î–ï–ù–¨ 94! WaitGroups –æ—Å–≤–æ–µ–Ω—ã!")
	fmt.Println("–î–æ—Ñ–∞–º–∏–Ω–æ–≤–∞—è –Ω–∞–≥—Ä–∞–¥–∞: +100 –∫ —Å–∫–∏–ª–ª—É Go, +50 –∫ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏!")
}

func main() {
	fmt.Println("üß† –ì–û–®–ê –ò WAITGROUP: –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –ñ–ò–ó–ù–ï–ù–ù–´–• –ì–û–†–£–¢–ò–ù")
	fmt.Println("==================================================")

	var lifeWG sync.WaitGroup

	// –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ –º–µ—à–∞—é—â–∏–µ –≥–æ—Ä—É—Ç–∏–Ω—ã
	distractions := []func(*sync.WaitGroup){
		depressionRoutine,
		financialAnxietyRoutine,
		procrastinationRoutine,
		creativeItchRoutine,
	}

	fmt.Println("üîÑ –ó–∞–ø—É—Å–∫–∞—é –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é –º–µ—à–∞—é—â–∏–µ –≥–æ—Ä—É—Ç–∏–Ω—ã...")

	for _, distraction := range distractions {
		lifeWG.Add(1)
		go distraction(&lifeWG)
	}

	// –ñ–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –º–µ—à–∞—é—â–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω
	fmt.Println("\n‚è≥ –ñ–¥—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –æ—Ç–≤–ª–µ–∫–∞—é—â–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤...")
	lifeWG.Wait()

	fmt.Println("\n‚ú® –í–°–ï –ú–ï–®–ê–Æ–©–ò–ï –ì–û–†–£–¢–ò–ù–´ –ó–ê–í–ï–†–®–ï–ù–´!")
	fmt.Println("==================================")

	// –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≥–ª–∞–≤–Ω—É—é –≥–æ—Ä—É—Ç–∏–Ω—É
	studyGoRoutine()

	// –ë–æ–Ω—É—Å: –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ WaitGroup
	fmt.Println("\nüîß –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø WaitGroup:")
	fmt.Println("=======================================")

	var demoWG sync.WaitGroup
	results := make([]string, 3)

	for i := 0; i < 3; i++ {
		demoWG.Add(1)
		go func(id int) {
			defer demoWG.Done()
			time.Sleep(time.Duration(id+1) * time.Second)
			results[id] = fmt.Sprintf("–ó–∞–¥–∞—á–∞ %d –≤—ã–ø–æ–ª–Ω–µ–Ω–∞", id+1)
		}(i)
	}

	demoWG.Wait()

	for _, result := range results {
		fmt.Println("‚úÖ", result)
	}

	fmt.Println("\nüèÅ –í–°–ï –ì–û–†–£–¢–ò–ù–´ –°–ò–ù–•–†–û–ù–ò–ó–ò–†–û–í–ê–ù–´! –ì–æ—à–∞ –≥–æ—Ç–æ–≤ –∫ –Ω–æ–≤—ã–º —Å–≤–µ—Ä—à–µ–Ω–∏—è–º!")
}
