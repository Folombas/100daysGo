<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä JSON/XML</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <h1>üîÅ –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–∞–Ω–Ω—ã—Ö JSON/XML</h1>
        
        <div class="card">
            <form action="/convert" method="POST">
                <div class="form-group">
                    <label for="inputData">–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                    <input type="text" id="inputData" name="inputData" 
                        value="{{.Input}}" placeholder="–ò–º—è, –í–æ–∑—Ä–∞—Å—Ç, Email, –•–æ–±–±–∏1;–•–æ–±–±–∏2">
                    <small>–ü—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω, 30, ivan@mail.ru, –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ;–§—É—Ç–±–æ–ª;–ß—Ç–µ–Ω–∏–µ</small>
                </div>
                
                <div class="form-group">
                    <label>–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:</label>
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="format" value="json" {{if eq .Format "json"}}checked{{end}}>
                            JSON
                        </label>
                        <label>
                            <input type="radio" name="format" value="xml" {{if eq .Format "xml"}}checked{{end}}>
                            XML
                        </label>
                    </div>
                </div>
                
                <button type="submit">–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </form>
            
            {{if .Result}}
            <div class="result">
                <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h2>
                <pre>{{.Result}}</pre>
                
                <div class="actions">
                    <button onclick="copyToClipboard()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button onclick="downloadResult()">–°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª</button>
                </div>
            </div>
            {{end}}
        </div>
        
        <div class="card info">
            <h2>üìù –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h2>
            <ol>
                <li>Go —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
                    <pre>type Data struct {
    Name    string   `json:"name" xml:"name"`
    Age     int      `json:"age" xml:"age"`
    Email   string   `json:"email,omitempty" xml:"email,omitempty"`
    Hobbies []string `json:"hobbies" xml:"hobbies>hobby"`
}</pre>
                </li>
                <li>–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ç–µ–≥–∞–º–∏</li>
                <li>–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥</li>
            </ol>
        </div>
    </div>

    <script>
        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
        function copyToClipboard() {
            const text = document.querySelector('.result pre').innerText;
            navigator.clipboard.writeText(text)
                .then(() => alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!'))
                .catch(err => alert('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ' + err));
        }
        
        // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        function downloadResult() {
            const format = document.querySelector('input[name="format"]:checked').value;
            const text = document.querySelector('.result pre').innerText;
            const filename = `data.${format}`;
            
            const blob = new Blob([text], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            link.click();
        }
    </script>
</body>
</html>