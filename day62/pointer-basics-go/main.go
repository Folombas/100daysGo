package main

import (
	"fmt"
	"unsafe"
)

// üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
type Player struct {
	Name     string
	Level    int
	Health   float64
	IsActive bool
}

// üéØ –§—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è —É–∫–∞–∑–∞—Ç–µ–ª—å –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
func levelUp(player *Player) {
	player.Level++
	player.Health += 10.0
	fmt.Printf("üéÆ %s –ø–æ–≤—ã—Å–∏–ª —É—Ä–æ–≤–µ–Ω—å –¥–æ %d! –ó–¥–æ—Ä–æ–≤—å–µ: %.1f\n",
		player.Name, player.Level, player.Health)
}

// üìä –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏ —É–∫–∞–∑–∞—Ç–µ–ª–µ–º
func demonstrateValueVsPointer() {
	fmt.Println("\nüîç –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø: –ó–ù–ê–ß–ï–ù–ò–ï vs –£–ö–ê–ó–ê–¢–ï–õ–¨")
	fmt.Println("=========================================")

	// –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
	score := 100
	fmt.Printf("üéØ –ò—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ score: %d (–∞–¥—Ä–µ—Å: %p)\n", score, &score)

	// –ü–µ—Ä–µ–¥–∞–µ–º –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é (–∫–æ–ø–∏—è)
	modifyValue(score)
	fmt.Printf("üìù –ü–æ—Å–ª–µ modifyValue(score): %d\n", score)

	// –ü–µ—Ä–µ–¥–∞–µ–º –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é (–æ—Ä–∏–≥–∏–Ω–∞–ª)
	modifyPointer(&score)
	fmt.Printf("üìç –ü–æ—Å–ª–µ modifyPointer(&score): %d\n", score)
}

// üîÑ –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ–ø–∏–µ–π)
func modifyValue(value int) {
	value = 200
	fmt.Printf("   üîÑ modifyValue: –∏–∑–º–µ–Ω–∏–ª–∏ –∫–æ–ø–∏—é –Ω–∞ %d\n", value)
}

// üîÑ –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º)
func modifyPointer(pointer *int) {
	*pointer = 300
	fmt.Printf("   üîÑ modifyPointer: –∏–∑–º–µ–Ω–∏–ª–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª –Ω–∞ %d\n", *pointer)
}

// üß† –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
func demonstrateDifferentTypes() {
	fmt.Println("\nüé™ –£–ö–ê–ó–ê–¢–ï–õ–ò –ù–ê –†–ê–ó–õ–ò–ß–ù–´–ï –¢–ò–ü–´ –î–ê–ù–ù–´–•")
	fmt.Println("=====================================")

	// –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ string
	name := "–ì–æ—Ñ–µ—Ä"
	namePtr := &name
	fmt.Printf("üìù String: –∑–Ω–∞—á–µ–Ω–∏–µ=%s, —É–∫–∞–∑–∞—Ç–µ–ª—å=%p, —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å=%s\n",
		name, namePtr, *namePtr)

	// –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ int
	age := 25
	agePtr := &age
	fmt.Printf("üî¢ Int: –∑–Ω–∞—á–µ–Ω–∏–µ=%d, —É–∫–∞–∑–∞—Ç–µ–ª—å=%p, —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å=%d\n",
		age, agePtr, *agePtr)

	// –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ float
	pi := 3.14159
	piPtr := &pi
	fmt.Printf("üìê Float64: –∑–Ω–∞—á–µ–Ω–∏–µ=%.5f, —É–∫–∞–∑–∞—Ç–µ–ª—å=%p, —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å=%.5f\n",
		pi, piPtr, *piPtr)

	// –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ bool
	isReady := true
	isReadyPtr := &isReady
	fmt.Printf("‚úÖ Bool: –∑–Ω–∞—á–µ–Ω–∏–µ=%t, —É–∫–∞–∑–∞—Ç–µ–ª—å=%p, —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å=%t\n",
		isReady, isReadyPtr, *isReadyPtr)
}

// üíæ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
func demonstrateStructPointers() {
	fmt.Println("\nüèóÔ∏è –£–ö–ê–ó–ê–¢–ï–õ–ò –ù–ê –°–¢–†–£–ö–¢–£–†–´")
	fmt.Println("=========================")

	// –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É
	player := Player{
		Name:     "–ê–ª–µ–∫—Å–µ–π",
		Level:    1,
		Health:   100.0,
		IsActive: true,
	}

	fmt.Printf("üéÆ –ò—Å—Ö–æ–¥–Ω—ã–π –∏–≥—Ä–æ–∫: %+v\n", player)
	fmt.Printf("üìç –ê–¥—Ä–µ—Å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: %p\n", &player)

	// –ü–µ—Ä–µ–¥–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
	levelUp(&player)
	fmt.Printf("üéÆ –ò–≥—Ä–æ–∫ –ø–æ—Å–ª–µ levelUp: %+v\n", player)
}

// üé≠ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è nil —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º–∏
func demonstrateNilPointers() {
	fmt.Println("\n‚ö†Ô∏è –†–ê–ë–û–¢–ê –° NIL –£–ö–ê–ó–ê–¢–ï–õ–Ø–ú–ò")
	fmt.Println("=========================")

	var nilPtr *int
	fmt.Printf("üìù Nil —É–∫–∞–∑–∞—Ç–µ–ª—å: %p\n", nilPtr)

	// –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Ä–∞–∑—ã–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º
	if nilPtr != nil {
		fmt.Printf("üìç –ó–Ω–∞—á–µ–Ω–∏–µ: %d\n", *nilPtr)
	} else {
		fmt.Println("‚ùå –û—à–∏–±–∫–∞: –ø–æ–ø—ã—Ç–∫–∞ —Ä–∞–∑—ã–º–µ–Ω–æ–≤–∞—Ç—å nil —É–∫–∞–∑–∞—Ç–µ–ª—å!")
	}

	// –°–æ–∑–¥–∞–µ–º –≤–∞–ª–∏–¥–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å
	value := 42
	validPtr := &value

	if validPtr != nil {
		fmt.Printf("‚úÖ –í–∞–ª–∏–¥–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å: %p, –∑–Ω–∞—á–µ–Ω–∏–µ: %d\n", validPtr, *validPtr)
	}
}

// üî¨ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è: –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π (—á–µ—Ä–µ–∑ unsafe)
func demonstratePointerArithmetic() {
	fmt.Println("\nüî¨ –ü–†–û–î–í–ò–ù–£–¢–ê–Ø –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø: –ú–ê–°–°–ò–í–´ –ò –£–ö–ê–ó–ê–¢–ï–õ–ò")
	fmt.Println("===============================================")

	numbers := [3]int{10, 20, 30}
	fmt.Printf("üì¶ –ú–∞—Å—Å–∏–≤: %v\n", numbers)

	// –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
	firstPtr := &numbers[0]
	fmt.Printf("üìç –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ numbers[0]: %p, –∑–Ω–∞—á–µ–Ω–∏–µ: %d\n", firstPtr, *firstPtr)

	// –ò—Å–ø–æ–ª—å–∑—É–µ–º unsafe –¥–ª—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∏ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
	secondPtr := unsafe.Pointer(uintptr(unsafe.Pointer(firstPtr)) + unsafe.Sizeof(numbers[0]))
	fmt.Printf("üìç –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ numbers[1] (—á–µ—Ä–µ–∑ –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫—É): %p\n", secondPtr)

	// –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –≤—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç
	secondPtrSafe := &numbers[1]
	fmt.Printf("üìç –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ numbers[1] (–±–µ–∑–æ–ø–∞—Å–Ω–æ): %p, –∑–Ω–∞—á–µ–Ω–∏–µ: %d\n",
		secondPtrSafe, *secondPtrSafe)
}

// üéØ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π
func createPlayer(name string, level int) *Player {
	fmt.Printf("üèóÔ∏è –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞: %s\n", name)
	return &Player{
		Name:     name,
		Level:    level,
		Health:   100.0,
		IsActive: true,
	}
}

func demonstrateFunctionPointers() {
	fmt.Println("\nüîÑ –£–ö–ê–ó–ê–¢–ï–õ–ò –ò –§–£–ù–ö–¶–ò–ò")
	fmt.Println("=====================")

	// –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å
	playerPtr := createPlayer("–ú–∞—Ä–∏—è", 5)
	fmt.Printf("üéÆ –ò–≥—Ä–æ–∫ —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å: %+v\n", *playerPtr)
	fmt.Printf("üìç –ê–¥—Ä–µ—Å –≤ –ø–∞–º—è—Ç–∏: %p\n", playerPtr)

	// –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å
	playerPtr.Level = 10
	fmt.Printf("üéÆ –ü–æ—Å–ª–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏: %+v\n", *playerPtr)
}

func main() {
	fmt.Println("üéâ –î–ï–ú–û –£–ö–ê–ó–ê–¢–ï–õ–ï–ô –í GO!")
	fmt.Println("========================")
	fmt.Println("üí° –£–∫–∞–∑–∞—Ç–µ–ª–∏ ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ö—Ä–∞–Ω—è—â–∏–µ –∞–¥—Ä–µ—Å–∞ –ø–∞–º—è—Ç–∏ –¥—Ä—É–≥–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö")
	fmt.Println("üí° –°–∏–º–≤–æ–ª & ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π")
	fmt.Println("üí° –°–∏–º–≤–æ–ª * ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∞–¥—Ä–µ—Å—É (—Ä–∞–∑—ã–º–µ–Ω–æ–≤–∞–Ω–∏–µ)")

	// üéØ –û—Å–Ω–æ–≤–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
	demonstrateValueVsPointer()
	demonstrateDifferentTypes()
	demonstrateStructPointers()
	demonstrateNilPointers()
	demonstratePointerArithmetic()
	demonstrateFunctionPointers()

	// üèÜ –ò—Ç–æ–≥–∏
	fmt.Println("\nüéØ –ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´:")
	fmt.Println("‚úÖ –£–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é —Å –ø–∞–º—è—Ç—å—é")
	fmt.Println("‚úÖ &variable ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π")
	fmt.Println("‚úÖ *pointer ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∞–¥—Ä–µ—Å—É")
	fmt.Println("‚úÖ –£–∫–∞–∑–∞—Ç–µ–ª–∏ —ç–∫–æ–Ω–æ–º—è—Ç –ø–∞–º—è—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏")
	fmt.Println("‚úÖ –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ nil –ø–µ—Ä–µ–¥ —Ä–∞–∑—ã–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º")
	fmt.Println("‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π")
	fmt.Println("üö´ –í Go –Ω–µ—Ç –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∏ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π (–∫—Ä–æ–º–µ –ø–∞–∫–µ—Ç–∞ unsafe)")

	fmt.Println("\nüéä –ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –æ—Å–≤–æ–µ–Ω–∏–µ–º —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –≤ Go! üéä")
}
