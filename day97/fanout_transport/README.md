# üöå –î–µ–Ω—å 97: Fan-out –≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ –¥–µ–ø—Ä–µ—Å—Å–∏–∏

**–ú–æ–¥—É–ª—å Day 97 –º–∞—Ä–∞—Ñ–æ–Ω–∞ "100DaysGo: Reboot"**

## üß† –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–∏–º—É–ª–∏—Ä—É–µ—Ç **—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö –ø—Å–∏—Ö–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (–≤–æ—Ä–∫–µ—Ä–æ–≤)** –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∑–∞–¥–∞—á (–ø–æ–µ–∑–¥–æ–∫) –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏.

**üéØ –¶–µ–ª—å:** –û—Å–≤–æ–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω **Fan-out/Fan-in** —á–µ—Ä–µ–∑ –º–µ—Ç–∞—Ñ–æ—Ä—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Å–∏–ª–∏–π –≤ —Å–ª–æ–∂–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```

–°—Ç–∞—Ä—Ç ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á ‚Üí Fan-out –ø–æ –≤–æ—Ä–∫–µ—Ä–∞–º
‚Üì                           ‚Üì
–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞    ‚Üê Fan-in —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚Üì                           ‚Üì
–ê–Ω–∞–ª–∏–∑ \& –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. **`Passenger`** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞—Å—Å–∞–∂–∏—Ä–∞ (–∑–∞–¥–∞—á–∞)
2. **`TransportSimulator`** ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã
3. **Fan-out –º–µ—Ö–∞–Ω–∏–∑–º:**
   - –ö–∞–Ω–∞–ª –∑–∞–¥–∞—á (`passengers`)
   - –ü—É–ª –≤–æ—Ä–∫–µ—Ä–æ–≤ (`—Å–∏–ª—ã –≤–æ–ª–∏`)
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
   - –°–±–æ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (fan-in)

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```go
// 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∑–∞–¥–∞—á–∏ (–ø–∞—Å—Å–∞–∂–∏—Ä—ã)
tasks := generatePassengers(50)

// 2. Fan-out: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ –≤–æ—Ä–∫–µ—Ä–∞–º
wg.Add(numWorkers)
for i := 0; i < numWorkers; i++ {
    go worker(tasks, results, &wg)
}

// 3. –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (WaitGroup)
wg.Wait()
```


## üß© –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –º–µ—Ç–∞—Ñ–æ—Ä–∞

| Go –ö–æ–Ω—Ü–µ–ø—Ü–∏—è | –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∞–Ω–∞–ª–æ–≥–∏—è |
| :-- | :-- |
| **–ì–æ—Ä—É—Ç–∏–Ω—ã** | –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –≤ –¥–µ–ø—Ä–µ—Å—Å–∏–∏ |
| **–ö–∞–Ω–∞–ª—ã** | –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è "—Ö–æ—á—É" ‚Üî "–º–æ–≥—É" |
| **WaitGroup** | –û–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –Ω–∞—á–∞—Ç–æ–µ |
| **Fan-out** | –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å–∏–ª–∏–π –ø–æ –∑–∞–¥–∞—á–∞–º |
| **Context** | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è/—ç–Ω–µ—Ä–≥–∏—è |

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
mkdir -p day97/fanout_transport && cd day97/fanout_transport
go mod init fanout_transport

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–º—É–ª—è—Ü–∏—é
go run main.go
```


### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
üöå –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è: Day 97
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üöÄ –ó–∞–ø—É—â–µ–Ω–æ 8 –≤–æ—Ä–∫–µ—Ä–æ–≤ (—Å–∏–ª –≤–æ–ª–∏)
üìà –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤: 50/50
‚è±Ô∏è  –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 2.3s
üìä –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 87%

üî• Fan-out —Å–ø–∞—Å–∞–µ—Ç –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏!
```


## üíª –ö–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ Fan-out:

```go
func simulateTransport(numWorkers, numPassengers int) {
    tasks := make(chan *Passenger, numPassengers)
    results := make(chan *PassengerResult, numPassengers)
    var wg sync.WaitGroup

    // Fan-out: –∑–∞–ø—É—Å–∫–∞–µ–º –≤–æ—Ä–∫–µ—Ä–æ–≤
    for i := 0; i < numWorkers; i++ {
        wg.Add(1)
        go transportWorker(i, tasks, results, &wg)
    }

    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∑–∞–¥–∞—á–∏
    go generatePassengers(numPassengers, tasks)

    // –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
    wg.Wait()
    close(results)
}
```


## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –°—Ü–µ–Ω–∞—Ä–∏–π | –í–æ—Ä–∫–µ—Ä—ã | –í—Ä–µ–º—è | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
| :-- | :-- | :-- | :-- |
| **–ë–µ–∑ Fan-out** | 1 | 12.5s | 45% |
| **Fan-out 4** | 4 | 4.2s | 78% |
| **Fan-out 8** | 8 | 2.3s | **87%** |
| **Fan-out 16** | 16 | 2.1s | 89% |

## üéÆ 10 –ú–û–¢–ò–í–ê–¶–ò–û–ù–ù–´–• –¢–†–ò–ì–ì–ï–†–û–í –î–õ–Ø GO

1. **Go —É—á–∏—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É** ‚Äî –∫–∞–∫ –∏ —Ç–≤–æ—è –ø—Å–∏—Ö–∏–∫–∞ —Å–µ–≥–æ–¥–Ω—è
2. –ö–∞–∂–¥–∞—è —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ ‚Äî **–∫–∏—Ä–ø–∏—á –≤ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–µ –∫–∞—Ä—å–µ—Ä—ã**
3. –ì–æ—Ä—É—Ç–∏–Ω—ã –¥–µ—à–µ–≤–ª–µ –ø–æ—Ç–æ–∫–æ–≤ ‚Äî –∫–∞–∫ –º–µ–ª–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–µ—à–µ–≤–ª–µ –ø–æ–¥–≤–∏–≥–æ–≤
4. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** = –Ω–∞–≤—ã–∫–∏: —Ä–µ–∞–ª–∏–∑—É–µ—à—å ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—à—å
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** = –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—à–µ–Ω–∏–π –Ω–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç—å
6. **Go modules** > —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –≤ –∂–∏–∑–Ω–∏
7. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** = –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫, –±–æ–ª—å—à–µ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
8. –ì–æ—Ä—É—Ç–∏–Ω—ã **–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –≥–ª–∞–≤–Ω—ã–π –ø–æ—Ç–æ–∫** (—Ç–≤–æ—é –∂–∏–∑–Ω—å)
9. **–û–¥–∏–Ω –±–∏–Ω–∞—Ä–Ω–∏–∫** = –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è)
10. **–°–æ–æ–±—â–µ—Å—Ç–≤–æ Go** ‚Äî –≤–∑—Ä–æ—Å–ª—ã–µ –ª—é–¥–∏, —Ä–µ—à–∞—é—â–∏–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
day97/fanout_transport/
‚îú‚îÄ‚îÄ main.go              # üéÆ –°–∏–º—É–ª—è—Ç–æ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
‚îú‚îÄ‚îÄ go.mod              # üì¶ –ú–æ–¥—É–ª—å
‚îú‚îÄ‚îÄ README.md           # üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ transport_test.go   # üß™ –¢–µ—Å—Ç—ã
```


## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
go test -v ./...

# –° race detector
go test -race ./...

# –ë–µ–Ω—á–º–∞—Ä–∫–∏
go test -bench=.
```


## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—É—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ Day 97 –≤—ã –æ—Å–≤–æ–∏—Ç–µ:

‚úÖ **Fan-out/Fan-in** –ø–∞—Ç—Ç–µ—Ä–Ω—ã
‚úÖ **WaitGroup** –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚úÖ **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤**
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏**
‚úÖ **–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫—É—é —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** üòé

## ‚ö†Ô∏è DISCLAIMER

**üé≠ –•–£–î–û–ñ–ï–°–¢–í–ï–ù–ù–û–ï –ü–†–û–ì–†–ê–ú–ú–ò–†–û–í–ê–ù–ò–ï**

> –í—Å–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ Daily Code Life Story –ì–æ—à–∏ ‚Äî **–≤—ã–º—ã—à–ª–µ–Ω–Ω—ã–µ**.
> –°–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã.
>
> **–î–µ–ø—Ä–µ—Å—Å–∏—è ‚Äî —Å–µ—Ä—å–µ–∑–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.** –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É.
>
> –ú—ã –ø–∏—à–µ–º –∫–æ–¥, **—á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –∂–∏–∑–Ω—å**, –Ω–æ **–Ω–µ –∑–∞–º–µ–Ω—è–µ–º –∂–∏–∑–Ω—å –∫–æ–¥–æ–º**.

**Fan-out —Å–≤–æ–∏—Ö –∑–∞–¥–∞—á. Fan-in –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π. üöÄ**

***

**–î–µ–Ω—å 97/100 –∑–∞–≤–µ—Ä—à–µ–Ω. –ù–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∞. –°–∏—Å—Ç–µ–º–∞ —É—Å—Ç–æ–π—á–∏–≤–∞.**

*–ü–æ—Å–≤—è—â–∞–µ—Ç—Å—è –≤—Å–µ–º, –∫—Ç–æ fan-out'–∏—Ç –¥–µ–ø—Ä–µ—Å—Å–∏—é —á–µ—Ä–µ–∑ –∫–æ–¥. –í—ã ‚Äî –∫—Ä—É—Ç—ã–µ.*

***

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –º–µ—Ç–∞—Ñ–æ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
‚úÖ –ß–µ—Ç–∫–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
‚úÖ –¢–∞–±–ª–∏—Ü—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚úÖ –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã
‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω
‚úÖ –ü–æ–ª–Ω—ã–π disclaimer
