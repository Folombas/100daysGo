# Day 92: –ü–∞–∫–µ—Ç Sync ‚Äî –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –•–∞–æ—Å–∞

## üéØ –ú–∏—Å—Å–∏—è –º–æ–¥—É–ª—è
–û—Å–≤–æ–∏—Ç—å –∏—Å–∫—É—Å—Å—Ç–≤–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å—é –≤ Go —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç `sync`. –ù–∞—É—á–∏—Ç—å—Å—è –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å —Ö–∞–æ—Ç–∏—á–Ω—ã–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –≤ —Å–ª–∞–∂–µ–Ω–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞
- `main.go` ‚Äî —Å–∏–º—É–ª—è—Ç–æ—Ä –¥–æ—Å—Ç–∞–≤–∫–∏, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π 4 –ø–æ–¥—Ö–æ–¥–∞ –∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `go.mod` ‚Äî —Ñ–∞–π–ª –º–æ–¥—É–ª—è Go

## üß™ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞?
–ü—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –∫—É—Ä—å–µ—Ä—Å–∫–æ–π —Å–ª—É–∂–±—ã (–∫–∞–∫ —É –ì–æ—à–∏), –≥–¥–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ "–∫—É—Ä—å–µ—Ä–æ–≤"-–≥–æ—Ä—É—Ç–∏–Ω –ø—ã—Ç–∞—é—Ç—Å—è –æ–±–Ω–æ–≤–ª—è—Ç—å –æ–±—â–∏–π —Å—á—ë—Ç—á–∏–∫ –∑–∞—Ä–∞–±–æ—Ç–∫–∞:

1. **–≠—Ç–∞–ø 1 ‚Äî –•–∞–æ—Å**: –ì–æ–Ω–∫–∞ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (—Ç–µ—Ä—è–µ–º –¥–µ–Ω—å–≥–∏!)
2. **–≠—Ç–∞–ø 2 ‚Äî Mutex**: –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å `sync.Mutex` (–Ω–∞–¥—ë–∂–Ω–æ, –Ω–æ —Å –æ—á–µ—Ä–µ–¥—è–º–∏)
3. **–≠—Ç–∞–ø 3 ‚Äî Atomic**: –ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å `sync/atomic` (–∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Å—á—ë—Ç—á–∏–∫–æ–≤)
4. **–≠—Ç–∞–ø 4 ‚Äî Once**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å `sync.Once`

## üéÆ –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è: "–£—Ä–æ–≤–Ω–∏ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏"

### –£—Ä–æ–≤–µ–Ω—å 1: "–ù–æ–≤–∏—á–æ–∫-–ö—É—Ä—å–µ—Ä"
**–ó–∞–¥–∞—á–∞:** –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—É 3 —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥.
**–ù–∞–±–ª—é–¥–µ–Ω–∏–µ:** –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ –≠—Ç–∞–ø–µ 1 –∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –≤—Å–µ–≥–¥–∞ —Ä–∞–∑–Ω–∞—è.
**–ù–∞–≥—Ä–∞–¥–∞:** –ü–æ–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Ç–∞–∫–æ–µ "–≥–æ–Ω–∫–∞ –¥–∞–Ω–Ω—ã—Ö" –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ.
**–§—Ä–∞–∑–∞:** *"–ö–æ–¥ –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ‚Äî –∫–∞–∫ –∫—É—Ä—å–µ—Ä –±–µ–∑ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–∞: –º–æ–∂–µ—Ç –¥–æ—Å—Ç–∞–≤–∏—Ç—å, –∞ –º–æ–∂–µ—Ç –∏ –ø–æ—Ç–µ—Ä—è—Ç—å—Å—è."*

### –£—Ä–æ–≤–µ–Ω—å 2: "–î–∏—Å–ø–µ—Ç—á–µ—Ä Mutex"
**–ó–∞–¥–∞—á–∞:** –î–æ–±–∞–≤—å –≤ –≠—Ç–∞–ø 2 —Å Mutex —Å—á—ë—Ç—á–∏–∫, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∫—É—Ä—å–µ—Ä—ã –∂–¥–∞–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞.
**–ü–æ–¥—Å–∫–∞–∑–∫–∞:** –°–æ–∑–¥–∞–π –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `var waitingCounter int32` –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–π –µ—ë –ø–µ—Ä–µ–¥ `mu.Lock()`.
**–ù–∞–≥—Ä–∞–¥–∞:** –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ü–µ–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
**–§—Ä–∞–∑–∞:** *"Mutex ‚Äî —ç—Ç–æ –∫–∞–∫ —Ç—É—Ä–Ω–∏–∫–µ—Ç –≤ –º–µ—Ç—Ä–æ: –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫, –Ω–æ —Å–æ–∑–¥–∞—ë—Ç –æ—á–µ—Ä–µ–¥—å."*

### –£—Ä–æ–≤–µ–Ω—å 3: "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä Atomic"
**–ó–∞–¥–∞—á–∞:** –ü–µ—Ä–µ–ø–∏—à–∏ –≠—Ç–∞–ø 3 —Ç–∞–∫, —á—Ç–æ–±—ã –∫—É—Ä—å–µ—Ä—ã –¥–æ—Å—Ç–∞–≤–ª—è–ª–∏ —Å–ª—É—á–∞–π–Ω—ã–µ —Å—É–º–º—ã (–æ—Ç 500 –¥–æ 1500 —Ä—É–±), –∞ –Ω–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ 900.
**–ù–∞–≥—Ä–∞–¥–∞:** –ù–∞–≤—ã–∫ —Ä–∞–±–æ—Ç—ã —Å `atomic.AddInt32` –¥–ª—è –Ω–µ—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
**–§—Ä–∞–∑–∞:** *"Atomic –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –∫–∞–∫ –±–µ—Å–∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –æ–ø–ª–∞—Ç–∞: –±—ã—Å—Ç—Ä–æ, –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è, –∏ –¥–µ–Ω—å–≥–∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è."*

### –£—Ä–æ–≤–µ–Ω—å 4: "–ú–∞—Å—Ç–µ—Ä Once"
**–ó–∞–¥–∞—á–∞:** –î–æ–±–∞–≤—å –≤—Ç–æ—Ä–æ–π `sync.Once` –¥–ª—è "–ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤—Ç—Ä–∞–∫–∞" –∏ —É–±–µ–¥–∏—Å—å, —á—Ç–æ –∫–∞–∂–¥—ã–π Once –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.
**–ù–∞–≥—Ä–∞–¥–∞:** –ü–æ–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ `Once` ‚Äî –Ω–µ –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –¥–µ–π—Å—Ç–≤–∏–π.
**–§—Ä–∞–∑–∞:** *"sync.Once ‚Äî —ç—Ç–æ –∫–∞–∫ –º–∞–º–∞, –∫–æ—Ç–æ—Ä–∞—è –≥–æ—Ç–æ–≤–∏—Ç —É–∂–∏–Ω: —Å–∫–æ–ª—å–∫–æ –±—ã —Ä–∞–∑ —Ç—ã –Ω–∏ –ø–æ–ø—Ä–æ—Å–∏–ª, –æ–Ω–∞ —Å–¥–µ–ª–∞–µ—Ç —ç—Ç–æ –æ–¥–∏–Ω —Ä–∞–∑ –∑–∞ –≤–µ—á–µ—Ä."*

### –£—Ä–æ–≤–µ–Ω—å –ë–û–°–°: "–ì—É—Ä—É WaitGroup"
**–ó–∞–¥–∞—á–∞:** –ü–µ—Ä–µ–ø–∏—à–∏ –≤—Å—é –ø—Ä–æ–≥—Ä–∞–º–º—É —Ç–∞–∫, —á—Ç–æ–±—ã –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—É—Ä—å–µ—Ä–æ–≤ (–≥–æ—Ä—É—Ç–∏–Ω) –∑–∞–¥–∞–≤–∞–ª–æ—Å—å —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.
**–ù–∞–≥—Ä–∞–¥–∞:** –ì–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ `WaitGroup` –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω.
**–§—Ä–∞–∑–∞:** *"WaitGroup ‚Äî —ç—Ç–æ –∫–∞–∫ –º–∞–º–∞, –∫–æ—Ç–æ—Ä–∞—è –∂–¥—ë—Ç, –ø–æ–∫–∞ –≤—Å–µ –¥–µ—Ç–∏ —Å–æ–±–µ—Ä—É—Ç—Å—è –∑–∞ —Å—Ç–æ–ª–æ–º, –ø—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∞—Ç—å —É–∂–∏–Ω."*

## üß† 10 —Ñ—Ä–∞–∑ –¥–ª—è –ø—Ä–æ–∫–∞—á–∫–∏ –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π Sync

1. **"–ì–æ–Ω–∫–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ —Ç–≤–æ–∏ –≥–æ—Ä—É—Ç–∏–Ω—ã –≤–µ–¥—É—Ç —Å–µ–±—è –∫–∞–∫ –ì–æ—à–∞ —É—Ç—Ä–æ–º: –≤—Å–µ —Ö–æ—Ç—è—Ç –æ–¥–Ω–æ–≥–æ, –Ω–æ –±–µ–∑ –ø–æ—Ä—è–¥–∫–∞."**
2. **"sync.Mutex ‚Äî —ç—Ç–æ —Ü–∏—Ñ—Ä–æ–≤–æ–π —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç '—Å–µ–π—á–∞—Å –º–æ—è –æ—á–µ—Ä–µ–¥—å –≥–æ–≤–æ—Ä–∏—Ç—å' –≤ —Å–µ–º–µ–π–Ω–æ–º —á–∞—Ç–µ."**
3. **"Atomic –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –¥–æ—Ñ–∞–º–∏–Ω –¥–ª—è –∫–æ–¥–∞: –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫."**
4. **"–ï—Å–ª–∏ WaitGroup ‚Äî —ç—Ç–æ –º–∞–º–∞, –∂–¥—É—â–∞—è –¥–µ—Ç–µ–π –∫ —É–∂–∏–Ω—É, —Ç–æ –≥–æ—Ä—É—Ç–∏–Ω–∞ –±–µ–∑ Done() ‚Äî —ç—Ç–æ —Ä–µ–±—ë–Ω–æ–∫, –∑–∞–∏–≥—Ä–∞–≤—à–∏–π—Å—è –≤–æ –¥–≤–æ—Ä–µ."**
5. **"sync.Once ‚Äî —ç—Ç–æ –æ–±–µ—â–∞–Ω–∏–µ —Å–∞–º–æ–º—É —Å–µ–±–µ: '–£—Å—Ç–∞–Ω–æ–≤–ª—é Go –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑, –∞ –ø–æ—Ç–æ–º –±—É–¥—É —Ç–æ–ª—å–∫–æ –ø–∏—Å–∞—Ç—å –∫–æ–¥'."**
6. **"–í –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏, –∫–∞–∫ –≤ –º–µ—Ç—Ä–æ –≤ —á–∞—Å –ø–∏–∫: –±–µ–∑ sync –≤—Å–µ –±—É–¥—É—Ç —Ç–æ–ª–∫–∞—Ç—å—Å—è –≤ –¥–≤–µ—Ä—è—Ö."**
7. **"Mutex.Lock() ‚Äî —ç—Ç–æ –∫–∞–∫ –≤–∑—è—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–æ—Å–∏—Å–∫—É: –¥—Ä—É–≥–∏–µ –ø–æ–¥–æ–∂–¥—É—Ç, –ø–æ–∫–∞ —Ç—ã –Ω–µ —Å—ä–µ—à—å (Unlock())."**
8. **"–ò–∑—É—á–∞—è sync, —Ç—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—Å–≤–∞–∏–≤–∞–µ—à—å –ø–∞–∫–µ—Ç Go. –¢—ã —É—á–∏—à—å—Å—è –Ω–∞–≤–æ–¥–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—Å–µ–ª–µ–Ω–Ω—ã—Ö —Å–≤–æ–µ–≥–æ –∫–æ–¥–∞."**
9. **"–ì–æ—Ä—è—á–∏–π –¥—É—à –ø–æ—Å–ª–µ —Ö–æ–ª–æ–¥–Ω–æ–π —É–ª–∏—Ü—ã ‚Äî —ç—Ç–æ atomic –æ–ø–µ—Ä–∞—Ü–∏—è –¥–ª—è —Ç–µ–ª–∞: –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è."**
10. **"–ó–≤–æ–Ω–æ–∫ –º–∞–º—ã –ø—Ä–æ –∫–∞—Ä—Ç–æ—à–∫—É ‚Äî —ç—Ç–æ cond.Signal() –¥–ª—è —Ç–≤–æ–µ–≥–æ –º–æ–∑–≥–∞: –ø–æ—Ä–∞ –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è."**

## üìö –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
- **–ì–æ–Ω–∫–∞ –¥–∞–Ω–Ω—ã—Ö (Data Race)**: –ö–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥–æ—Ä—É—Ç–∏–Ω –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —á–∏—Ç–∞—é—Ç/–ø–∏—à—É—Ç –æ–¥–Ω—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
- **–ú—å—é—Ç–µ–∫—Å (Mutex)**: –ü—Ä–∏–º–∏—Ç–∏–≤ –≤–∑–∞–∏–º–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è ‚Äî "–æ–¥–∏–Ω –≤—Ö–æ–¥–∏—Ç, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∂–¥—É—Ç"
- **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: –ù–µ–¥–µ–ª–∏–º—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ shared-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- **WaitGroup**: –°—á—ë—Ç—á–∏–∫ –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–æ—Ä—É—Ç–∏–Ω
- **Once**: –ì–∞—Ä–∞–Ω—Ç–∏—è –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏

## üí° –ó–∞—á–µ–º —ç—Ç–æ –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏?
- **–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –ß—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–µ–Ω—å–≥–∏ –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–∞—Ö
- **–°—á—ë—Ç—á–∏–∫–∏ –ø–æ—Å–µ—â–µ–Ω–∏–π**: –ß—Ç–æ–±—ã 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ "–ø–æ—Ç–µ—Ä—è–ª–∏" —Å–≤–æ–∏ –∫–ª–∏–∫–∏
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤**: –ß—Ç–æ–±—ã –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–∏–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á**: –ß—Ç–æ–±—ã –≥–ª–∞–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∂–¥–∞–ª–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å
```bash
cd day92/sync-delivery-lab
go run main.go
