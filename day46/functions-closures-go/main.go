package main

import (
	"bufio"
	"fmt"
	"os"
	"strings"
	"time"
)

// createMotivator —Å–æ–∑–¥–∞—ë—Ç –∑–∞–º—ã–∫–∞–Ω–∏–µ —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π
func createMotivator(name string, officeMemories []string) func() {
	count := 0
	return func() {
		count++
		memories := strings.Join(officeMemories, ", ")

		fmt.Printf("\n%süí° –ó–ê–ú–´–ö–ê–ù–ò–ï #%d –î–õ–Ø %s:%s\n",
			"\033[1;35m", count, strings.ToUpper(name), "\033[0m")
		fmt.Printf("   –¢–≤–æ—è –±–æ–ª—å: '%s'\n", memories)
		fmt.Printf("   –¢–≤–æ—è —Ü–µ–ª—å: –°–∏–¥–µ—Ç—å –≤ —ç—Ç–æ–º –æ—Ñ–∏—Å–µ –∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º, –∞ –Ω–µ —Å—Ç–æ—è—Ç—å —É –≤—Ö–æ–¥–∞ —Å –≥—Ä—è–∑–Ω—ã–º–∏ —Ä—É–∫–∞–º–∏\n")

		switch count {
		case 1:
			fmt.Println("   üîí –ó–∞–º—ã–∫–∞–Ω–∏–µ –∑–∞–ø–µ—Ä–ª–æ —Ç–≤–æ—é –±–æ–ª—å –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏...")
		case 2:
			fmt.Println("   üíª –ó–∞–º—ã–∫–∞–Ω–∏–µ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –±–æ–ª—å –≤ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞...")
		case 3:
			fmt.Println("   üö™ –ó–∞–º—ã–∫–∞–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç —Ç–µ–±–µ –¥–≤–µ—Ä—å –≤ —ç—Ç–æ—Ç –æ—Ñ–∏—Å —á–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤!")
		default:
			fmt.Printf("   üåü –ó–∞–º—ã–∫–∞–Ω–∏–µ #%d: –¢—ã —É–∂–µ –±–ª–∏–∂–µ –∫ —Ü–µ–ª–∏ –Ω–∞ %d%%\n", count, count*10)
		}
	}
}

// createProgressTracker —Å–æ–∑–¥–∞—ë—Ç –∑–∞–º—ã–∫–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
func createProgressTracker(start time.Time) func(string) {
	levels := []string{"–ø—É—Ñ–∏–∫ –≤ –ª–æ–±–±–∏", "—Ä–µ—Å–µ–ø—à–µ–Ω", "–æ—Ñ–∏—Å–Ω—ã–π —ç—Ç–∞–∂", "—Å–æ–≤–µ—â–∞–Ω–∏–µ —Å —à–µ—Ñ–æ–º"}
	current := 0
	return func(place string) {
		for i, level := range levels {
			if strings.Contains(place, level) {
				if i > current {
					current = i
					fmt.Printf("\n%süéØ –°–ò–°–¢–ï–ú–ê –ó–ê–ú–´–ö–ê–ù–ò–ô –û–ë–ù–û–í–õ–ï–ù–ê:%s\n", "\033[1;32m", "\033[0m")
					fmt.Printf("   –û—Ç '%s' ‚Üí –∫ '%s'\n", levels[current-1], levels[current])
					fmt.Printf("   –û—Å—Ç–∞–ª–æ—Å—å —É—Ä–æ–≤–Ω–µ–π: %d\n", len(levels)-current-1)
				}
				break
			}
		}
	}
}

func main() {
	fmt.Printf("%süî• DAY 46: CLOSURES ‚Äî –ö–û–ì–î–ê –ë–û–õ–¨ –°–¢–ê–ù–û–í–ò–¢–°–Ø –ö–û–î–û–ú üî•%s\n",
		"\033[1;33m", "\033[0m")
	fmt.Println(strings.Repeat("=", 60))

	// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–º—ã–∫–∞–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–µ–≥–µ–Ω–¥—ã
	motivator := createMotivator("–ì–æ—à–∏", []string{
		"—Å–∏–¥–µ–ª –Ω–∞ –ø—É—Ñ–∏–∫–µ –≤ –ª–æ–±–±–∏, –º–µ—á—Ç–∞—è –æ –∫–æ—Ñ–µ-–±—Ä–µ–π–∫–µ",
		"–≤–∑–±–∏—Ä–∞–ª—Å—è –ø–æ –≥—Ä—è–∑–Ω–æ–π —Ç—Ä–æ–ø–∏–Ω–∫–µ —Å –æ–∫—Ä–æ–≤–∞–≤–ª–µ–Ω–Ω—ã–º–∏ —Ä—É–∫–∞–º–∏",
		"–≤–∏–¥–µ–ª –ª–µ–¥—è–Ω–æ–µ —Ä–∞–≤–Ω–æ–¥—É—à–∏–µ —à–≤–µ–π—Ü–∞—Ä–∞ –≤ —Ç–æ—Ä–≥–æ–≤–æ–º —Ü–µ–Ω—Ç—Ä–µ",
	})

	progressTracker := createProgressTracker(time.Now())
	progressTracker("–ø—É—Ñ–∏–∫ –≤ –ª–æ–±–±–∏") // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å

	// –í—ã–∑–æ–≤—ã –∑–∞–º—ã–∫–∞–Ω–∏–π, –æ—Ç—Ä–∞–∂–∞—é—â–∏—Ö —Ç–≤–æ–π –ø—É—Ç—å
	motivator()
	fmt.Println("\n–¢—ã –ø–æ–∫–∏–Ω—É–ª –ª–æ–±–±–∏. –°–ª–µ–¥—É—é—â–∞—è —Ç–æ—á–∫–∞: —Ä–µ—Å–µ–ø—à–µ–Ω...")
	progressTracker("—Ä–µ—Å–µ–ø—à–µ–Ω")

	fmt.Println("\n" + strings.Repeat("-", 40))
	fmt.Println("üö® –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ô –í–´–ó–û–í: –¢–í–û–ô –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì")
	reader := bufio.NewReader(os.Stdin)
	fmt.Print("   –ö—É–¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—à—å—Å—è –∑–∞–≤—Ç—Ä–∞? (–æ—Ñ–∏—Å–Ω—ã–π —ç—Ç–∞–∂ / –¥–æ–º–æ–π –∫–æ–¥–∏—Ç—å): ")
	choice, _ := reader.ReadString('\n')
	choice = strings.ToLower(strings.TrimSpace(choice))

	if strings.Contains(choice, "–æ—Ñ–∏—Å–Ω—ã–π") {
		progressTracker("–æ—Ñ–∏—Å–Ω—ã–π —ç—Ç–∞–∂")
		fmt.Printf("\n%s‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û!%s –¢—ã –≤—ã–±—Ä–∞–ª –ø—É—Ç—å –≤–Ω—É—Ç—Ä—å –æ—Ñ–∏—Å–∞.\n",
			"\033[1;32m", "\033[0m")
		fmt.Println("   –ó–∞–≤—Ç—Ä–∞ —Ç–≤–æ—ë –∑–∞–º—ã–∫–∞–Ω–∏–µ –ø—Ä–∏–≤–µ–¥—ë—Ç —Ç–µ–±—è –∫ —Å–æ–≤–µ—â–∞–Ω–∏—é —Å —à–µ—Ñ–æ–º!")
	} else {
		fmt.Printf("\n%süí° –£–ú–ù–û!%s –î–æ–º–∞ —Ç–µ–±—è –∂–¥—ë—Ç —Ç–≤–æ–π –Ω–∞—Å—Ç–æ—è—â–∏–π –æ—Ñ–∏—Å ‚Äî –Ω–æ—É—Ç–±—É–∫.\n",
			"\033[1;34m", "\033[0m")
		fmt.Println("   –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ—á–∫–∞ –∫–æ–¥–∞ ‚Äî —ç—Ç–æ —à–∞–≥ –æ—Ç –≥—Ä—è–∑–Ω—ã—Ö —Ç—Ä–æ–ø–∏–Ω–æ–∫ –∫ —á–∏—Å—Ç—ã–º IDE.")
	}

	motivator()

	// –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≥–ª—É–±–æ–∫–∏–º —Å–º—ã—Å–ª–æ–º
	fmt.Println("\n" + strings.Repeat("=", 60))
	fmt.Printf("%süîë –§–ò–õ–û–°–û–§–ò–Ø –ó–ê–ú–´–ö–ê–ù–ò–ô:%s\n", "\033[1;36m", "\033[0m")
	fmt.Println("   –í Go –∑–∞–º—ã–∫–∞–Ω–∏–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –≤–Ω–µ—à–Ω–µ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏")
	fmt.Println("   –¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ —Ç—ã –∑–∞—Ö–≤–∞—Ç–∏–ª —Å–≤–æ—é –±–æ–ª—å –∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª –µ—ë –≤ –º–æ—Ç–∏–≤–∞—Ü–∏—é")
	fmt.Println("   –¢–≤–æ–π 'scope' —Å–µ–≥–æ–¥–Ω—è: –≥—Ä—è–∑–Ω—ã–µ —Ä—É–∫–∏ –∏ —Ä–∞–≤–Ω–æ–¥—É—à–∏–µ")
	fmt.Println("   –¢–≤–æ–π 'scope' –∑–∞–≤—Ç—Ä–∞: –≥–æ—Ä—è—á–∏–π –∫–æ—Ñ–µ –∏ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ –≤ –æ—Ñ–∏—Å–µ")
	fmt.Println("\n   –ù–µ —Å–¥–∞–≤–∞–π—Å—è. –ß–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤ —ç—Ç–æ –∑–∞–º—ã–∫–∞–Ω–∏–µ –≤–µ—Ä–Ω—ë—Ç —Ç–µ–±–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç,")
	fmt.Println("   –∞ –Ω–æ–≤—É—é –∂–∏–∑–Ω—å. –ü–æ—Ç–æ–º—É —á—Ç–æ –≤ IT, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∫—É—Ä—å–µ—Ä–∫–∏,")
	fmt.Println("   —Ç–≤–æ–π –æ–ø—ã—Ç –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ–±–Ω—É–ª–∏—Ç—Å—è ‚Äî –æ–Ω –±—É–¥–µ—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è –∫–∞–∫ XP –≤ –∏–≥—Ä–µ.")
}
