// delivery_drama.go
// Day 52: Pointers with Maps & Slices - The Delivery Drama
package main

import (
	"fmt"
	"strings"
)

// Delivery –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑
type Delivery struct {
	From    string
	To      string
	Fee     int
	Comment string
}

// CourierState —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫—É—Ä—å–µ—Ä–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∫–∞—Ä—Ç—É)
type CourierState struct {
	Balance      *int              // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±–∞–ª–∞–Ω—Å
	Deliveries   *[]Delivery       // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ä–µ–∑ –¥–æ—Å—Ç–∞–≤–æ–∫
	Weather      map[string]string // –û–±—ã—á–Ω–∞—è –∫–∞—Ä—Ç–∞ (—É–∂–µ —Å—Å—ã–ª–æ—á–Ω—ã–π —Ç–∏–ø)
	IsProgrammer bool
}

func main() {
	fmt.Println("üöö –î–µ–Ω—å 52: –£–∫–∞–∑–∞—Ç–µ–ª–∏ —Å –ö–∞—Ä—Ç–∞–º–∏ –∏ –°—Ä–µ–∑–∞–º–∏")
	fmt.Println("üìÖ 25 –¥–µ–∫–∞–±—Ä—è 2025, 10:30 —É—Ç—Ä–∞")
	fmt.Println(strings.Repeat("-", 50))

	// 1. –ë–ê–õ–ê–ù–°: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã
	savings := 12500    // –ù–µ–º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è
	balance := &savings // –ü–æ–ª—É—á–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±–∞–ª–∞–Ω—Å

	fmt.Printf("üí∞ –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å: %d —Ä—É–± (–∞–¥—Ä–µ—Å –≤ –ø–∞–º—è—Ç–∏: %p)\n",
		savings, balance)

	// –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–∫—É–ø–∫–∏ –ø–æ–¥–∞—Ä–∫–æ–≤
	spendOnGifts(balance, 11800)
	fmt.Printf("üí∞ –ü–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ –ø–æ–¥–∞—Ä–∫–æ–≤: %d —Ä—É–±\n", savings)
	fmt.Println()

	// 2. –°–†–ï–ó–´: –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ä–µ–∑–æ–º —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å
	todaysDeliveries := []Delivery{
		{"–°–æ—Å–µ–¥–Ω—è—è —É–ª–∏—Ü–∞", "–¶–µ–Ω—Ç—Ä –≥–æ—Ä–æ–¥–∞", 850, "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –ø–æ–¥–∞—Ä–æ–∫"},
	}

	fmt.Printf("üì¶ –ò—Å—Ö–æ–¥–Ω—ã–π —Å—Ä–µ–∑ –¥–æ—Å—Ç–∞–≤–æ–∫: %v (–∞–¥—Ä–µ—Å —Å—Ä–µ–∑–∞: %p)\n",
		todaysDeliveries, &todaysDeliveries)
	fmt.Printf("   –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É–∫–∞–∑–∞—Ç–µ–ª—å –º–∞—Å—Å–∏–≤–∞: %p\n",
		todaysDeliveries)

	// –ü—ã—Ç–∞–µ–º—Å—è –¥–æ–±–∞–≤–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É (–±–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è - —Å–æ–∑–¥–∞—Å—Ç –∫–æ–ø–∏—é —Å—Ä–µ–∑–∞)
	tryAddDelivery(todaysDeliveries, Delivery{"–¶–µ–Ω—Ç—Ä", "–°–æ–∫–æ–ª", 650, "–û—Ñ–∏—Å–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫"})
	fmt.Printf("üì¶ –ü–æ—Å–ª–µ tryAddDelivery (–±–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è): %v\n", todaysDeliveries)

	// –î–æ–±–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ä–µ–∑
	addDelivery(&todaysDeliveries, Delivery{"–¶–µ–Ω—Ç—Ä", "–°–æ–∫–æ–ª", 650, "–û—Ñ–∏—Å–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫"})
	fmt.Printf("üì¶ –ü–æ—Å–ª–µ addDelivery (—Å —É–∫–∞–∑–∞—Ç–µ–ª–µ–º): %v\n", todaysDeliveries)
	fmt.Println()

	// 3. –ö–ê–†–¢–´: –ö–∞—Ä—Ç—ã —É–∂–µ —è–≤–ª—è—é—Ç—Å—è —Å—Å—ã–ª–æ—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏
	weather := map[string]string{
		"—É—Ç—Ä–æ":  "–≥–æ–ª–æ–ª—ë–¥, —Å–Ω–µ–≥",
		"–¥–µ–Ω—å":  "—Å–Ω–µ–∂–Ω–∞—è –º–µ—Ç–µ–ª—å",
		"–≤–µ—á–µ—Ä": "—Å–∏–ª—å–Ω—ã–π –≤–µ—Ç–µ—Ä",
	}

	fmt.Printf("üå°Ô∏è  –ò—Å—Ö–æ–¥–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø–æ–≥–æ–¥—ã: %v\n", weather)
	updateWeather(weather, "–Ω–æ—á—å", "–æ—á–∏—â–µ–Ω–∏–µ, -15¬∞C")
	fmt.Printf("üå°Ô∏è  –ü–æ—Å–ª–µ updateWeather: %v\n", weather)
	fmt.Println()

	// 4. –ö–û–ú–ü–û–ó–ò–¶–ò–Ø: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏
	state := CourierState{
		Balance:      balance,
		Deliveries:   &todaysDeliveries,
		Weather:      weather,
		IsProgrammer: false,
	}

	// "–î–æ—Ö–æ–¥ –≤—ã—à–µ –Ω–∞ 270%" - –∏—Å–ø–æ–ª—å–∑—É–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
	surgePricing(&state, 2.7)

	// –û—Å–æ–∑–Ω–∞–Ω–∏–µ: "–Ø - –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç"
	realizeProgrammingCalling(&state)

	fmt.Println(strings.Repeat("-", 50))
	printFinalState(state, savings)
}

// spendOnGifts –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å
func spendOnGifts(balance *int, amount int) {
	*balance -= amount
	fmt.Printf("   ‚Ü≥ –ü–æ—Ç—Ä–∞—á–µ–Ω–æ –Ω–∞ –ø–æ–¥–∞—Ä–∫–∏: %d —Ä—É–±\n", amount)
}

// tryAddDelivery –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è (—Å—Ä–µ–∑ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é)
func tryAddDelivery(deliveries []Delivery, d Delivery) {
	// –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç: append –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π —Å—Ä–µ–∑, –Ω–æ –º—ã –µ–≥–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º!
	// –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π deliveries –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –∫–æ–ø–∏—è —Å—Ä–µ–∑–∞.
	// –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –∑–¥–µ—Å—å —É–º–µ—Å—Ç–Ω–æ - –º—ã –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç append.
	_ = append(deliveries, d) // –Ø–≤–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
	// –≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏!
}

// addDelivery —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–ø—Ä–∏–Ω–∏–º–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ä–µ–∑)
func addDelivery(deliveries *[]Delivery, d Delivery) {
	*deliveries = append(*deliveries, d)
	fmt.Printf("   ‚Ü≥ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞: %s ‚Üí %s\n", d.From, d.To)
}

// updateWeather –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–∞—Ä—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ —Å—Å—ã–ª–∫–µ "–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
func updateWeather(weather map[string]string, time string, condition string) {
	weather[time] = condition
	fmt.Printf("   ‚Ü≥ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–≥–æ–¥–∞ –Ω–∞ '%s': %s\n", time, condition)
}

// surgePricing —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø–ª–∞—Ç—É –∑–∞ –≤—Å–µ –¥–æ—Å—Ç–∞–≤–∫–∏ (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å —É–∫–∞–∑–∞—Ç–µ–ª–µ–º –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É)
func surgePricing(state *CourierState, multiplier float64) {
	fmt.Printf("‚ö° –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: '–î–æ—Ö–æ–¥ –≤—ã—à–µ –Ω–∞ %.0f%%'\n",
		(multiplier-1)*100)

	for i := range *state.Deliveries {
		(*state.Deliveries)[i].Fee = int(float64((*state.Deliveries)[i].Fee) * multiplier)
	}
	fmt.Println("   ‚Ü≥ –ü—Ä–∏–º–µ–Ω–µ–Ω –ø–æ–≤—ã—à–∞—é—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ –≤—Å–µ–º –∑–∞–∫–∞–∑–∞–º")
}

// realizeProgrammingCalling –º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫—É—Ä—å–µ—Ä–∞
func realizeProgrammingCalling(state *CourierState) {
	state.IsProgrammer = true
	fmt.Println("\nüí° –û–∑–∞—Ä–µ–Ω–∏–µ –≤ –º–µ—Ç—Ä–æ –ø–æ –ø—É—Ç–∏ –¥–æ–º–æ–π:")
	fmt.Println("   '–Ø –Ω–µ –∫—É—Ä—å–µ—Ä. –Ø ‚Äî –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç.'")
	fmt.Println("   ‚Ü≥ –ü–æ–ª–µ IsProgrammer –∏–∑–º–µ–Ω–µ–Ω–æ —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å")
}

// printFinalState –≤—ã–≤–æ–¥–∏—Ç –∏—Ç–æ–≥–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
func printFinalState(state CourierState, actualBalance int) {
	fmt.Println("\nüéØ –ò–¢–û–ì –î–ù–Ø 52:")
	fmt.Printf("–ë–∞–ª–∞–Ω—Å: %d —Ä—É–±\n", actualBalance)
	fmt.Printf("–í—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–æ—Å—Ç–∞–≤–æ–∫: %d\n", len(*state.Deliveries))

	total := 0
	for _, d := range *state.Deliveries {
		total += d.Fee
	}
	fmt.Printf("–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –∑–∞ –¥–µ–Ω—å: %d —Ä—É–±\n", total)
	fmt.Printf("–°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞—Ä—Ç—ã –ø–æ–≥–æ–¥—ã: %v\n", state.Weather)
	fmt.Printf("–°–∞–º–æ–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: ")
	if state.IsProgrammer {
		fmt.Println("–ü–†–û–ì–†–ê–ú–ú–ò–°–¢ ‚úÖ")
	} else {
		fmt.Println("–∫—É—Ä—å–µ—Ä ‚ùå")
	}

	fmt.Println("\nüìö –í–´–í–û–î–´ –ü–û –¢–ï–ú–ï:")
	fmt.Println("1. –ö–∞—Ä—Ç—ã (maps) ‚Äî —Å—Å—ã–ª–æ—á–Ω—ã–π —Ç–∏–ø, –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ —Å—Å—ã–ª–∫–µ '–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏'")
	fmt.Println("2. –°—Ä–µ–∑—ã (slices) ‚Äî —Ç—Ä–µ–±—É—é—Ç —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª–∏–Ω—ã/–µ–º–∫–æ—Å—Ç–∏")
	fmt.Println("3. –£–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ")
	fmt.Println("4. Go –¥–µ–ª–∞–µ—Ç –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä: –ø—Ä–æ—Å—Ç–æ—Ç–∞ —Ç–∞–º, –≥–¥–µ –º–æ–∂–Ω–æ, –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–∞–º, –≥–¥–µ –Ω—É–∂–Ω–æ")
}
