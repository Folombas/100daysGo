// algorithm-sieve-eratosthenes/main.go
// –õ–µ–≥–µ–Ω–¥–∞: –ø–∏—à–µ—Ç—Å—è –≤ –∞–≤—Ç–æ–±—É—Å–µ –Ω–∞ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–µ Honor —á–µ—Ä–µ–∑ Termux –ø–æ–¥ Ubuntu
// –ß–∞—Å—Ç—å —á–µ–ª–ª–µ–Ω–¥–∂–∞ #100daysGo - –î–µ–Ω—å 53: –ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏–π –º–∏–∫—Å

package main

import (
    "fmt"
    "os"
    "strconv"
    "time"
)

// optimizedSieve - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ—Ç–æ –≠—Ä–∞—Ç–æ—Å—Ñ–µ–Ω–∞
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ä–µ–∑ –ø—Ä–æ—Å—Ç—ã—Ö —á–∏—Å–µ–ª –¥–æ limit
func optimizedSieve(limit int) []int {
    if limit < 2 {
        return []int{}
    }

    // –ë—É–ª–µ–≤—ã —Å—Ä–µ–∑—ã –≤ Go –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è false
    // –≠—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –æ–¥–∏–Ω —Ü–∏–∫–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    isComposite := make([]bool, limit+1)
    
    // –û—Å–Ω–æ–≤–Ω–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–∞ sqrt(limit)
    for i := 2; i*i <= limit; i++ {
        if !isComposite[i] {
            // –ù–∞—á–∏–Ω–∞–µ–º —Å i*i - –≤—Å–µ –º–µ–Ω—å—à–∏–µ –∫—Ä–∞—Ç–Ω—ã–µ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
            for j := i * i; j <= limit; j += i {
                isComposite[j] = true
            }
        }
    }

    // –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ (–∏–∑–º–µ—Ä–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç ~n/ln(n) –ø—Ä–æ—Å—Ç—ã—Ö —á–∏—Å–µ–ª)
    approxPrimes := int(float64(limit) / (1.5 * math.Log(float64(limit))))
    primes := make([]int, 0, approxPrimes)
    
    // –°–æ–±–∏—Ä–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–ø—Ä–æ–ø—É—Å–∫–∞–µ–º 0 –∏ 1)
    for i := 2; i <= limit; i++ {
        if !isComposite[i] {
            primes = append(primes, i)
        }
    }
    
    return primes
}

// benchmarkSieve - –∏–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤
func benchmarkSieve() {
    fmt.Println("üöå –ë–µ–Ω—á–º–∞—Ä–∫ (–ø–∏—à—É –≤ –∞–≤—Ç–æ–±—É—Å–µ –Ω–∞ Honor):")
    fmt.Println(strings.Repeat("‚îÄ", 40))
    
    testLimits := []int{100, 1000, 10000, 50000}
    
    for _, limit := range testLimits {
        start := time.Now()
        primes := optimizedSieve(limit)
        elapsed := time.Since(start)
        
        fmt.Printf("–î–æ %6d: %5d –ø—Ä–æ—Å—Ç—ã—Ö | –í—Ä–µ–º—è: %v\n", 
            limit, len(primes), elapsed)
    }
}

func main() {
    // –ê–≤—Ç–æ–±—É—Å–Ω—ã–π —Ä–µ–∂–∏–º: –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    limit := 15 // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∫–∞–∫ –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –∑–∞–¥–∞—á–µ)
    
    if len(os.Args) > 1 {
        if userLimit, err := strconv.Atoi(os.Args[1]); err == nil && userLimit > 0 {
            limit = userLimit
            fmt.Printf("üì± –õ–∏–º–∏—Ç –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ Termux: %d\n", limit)
        } else {
            fmt.Println("‚ö†Ô∏è  –ù–µ–≤–µ—Ä–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç, –∏—Å–ø–æ–ª—å–∑—É—é –ª–∏–º–∏—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é")
        }
    } else {
        fmt.Println("üöå –†–µ–∂–∏–º '–∞–≤—Ç–æ–±—É—Å': –ª–∏–º–∏—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (15)")
    }
    
    // –í—ã–ø–æ–ª–Ω—è–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º
    fmt.Printf("\nüîç –ò—â–µ–º –ø—Ä–æ—Å—Ç—ã–µ —á–∏—Å–ª–∞ –¥–æ %d...\n", limit)
    
    primes := optimizedSieve(limit)
    
    // –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    fmt.Printf("\n‚úÖ –ù–∞–π–¥–µ–Ω–æ %d –ø—Ä–æ—Å—Ç—ã—Ö —á–∏—Å–µ–ª:\n", len(primes))
    fmt.Println(primes)
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    fmt.Printf("\nüìä –ü–µ—Ä–≤–æ–µ: %d, –ü–æ—Å–ª–µ–¥–Ω–µ–µ: %d\n", 
        primes[0], primes[len(primes)-1])
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –±–µ–Ω—á–º–∞—Ä–∫ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    if limit >= 1000 {
        fmt.Println("\n" + strings.Repeat("‚ïê", 50))
        benchmarkSieve()
    }
    
    // –ê–≤—Ç–æ–±—É—Å–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞
    fmt.Println("\nüéß –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –≤ –¥–≤–∏–∂—É—â–µ–º—Å—è –∞–≤—Ç–æ–±—É—Å–µ")
    fmt.Println("üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –∏–∑ Termux –Ω–∞ Honor –ø–æ–¥ Ubuntu")
    fmt.Println("üöÄ –ì–æ—Ç–æ–≤–æ –¥–ª—è git push –∏–∑ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞!")
}

// –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–º–∏—Ç–∞:
// –î–æ–±–∞–≤–ª–µ–Ω –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
// –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
// –î–æ–±–∞–≤–ª–µ–Ω—ã –±–µ–Ω—á–º–∞—Ä–∫–∏
// –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
