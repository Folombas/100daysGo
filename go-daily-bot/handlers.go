package main

import (
	"fmt"
	"log"
	"math/rand"
	"time"

	tgbotapi "github.com/go-telegram-bot-api/telegram-bot-api/v5"
)

// ะะฝะธัะธะฐะปะธะทะธััะตะผ ะณะตะฝะตัะฐัะพั ัะปััะฐะนะฝัั ัะธัะตะป
func init() {
	rand.Seed(time.Now().UnixNano())
}

func HandleMessage(bot *tgbotapi.BotAPI, message *tgbotapi.Message, tracker *ChallengeTracker, sysInfo *SystemInfo, config *Config) {
	log.Printf("๐ค %s: %s", message.From.UserName, message.Text)

	var response string

	switch message.Text {
	case "/start", "/help":
		response = getWelcomeMessage()
	case "/progress", "/day":
		response = tracker.GetProgressMessage()
	case "/system", "/info":
		response = sysInfo.GetSystemMessage()
	case "/motivation":
		response = getMotivationMessage()
	case "/config":
		// ะขะพะปัะบะพ ะดะปั ะฐะดะผะธะฝะธัััะฐัะพัะฐ
		if message.From.ID == config.AdminID {
			response = getConfigInfo(config)
		} else {
			response = "โ ะะพัััะฟ ะทะฐะฟัะตััะฝ. ะญัะฐ ะบะพะผะฐะฝะดะฐ ัะพะปัะบะพ ะดะปั ะฐะดะผะธะฝะธัััะฐัะพัะฐ."
		}
	default:
		response = "๐ค ะัะฟะพะปัะทัะน ะบะพะผะฐะฝะดั:\n/start - ะะฐัะฐัั\n/progress - ะัะพะณัะตัั\n/system - ะะฝัะพ ะพ ัะธััะตะผะต\n/motivation - ะะพัะธะฒะฐัะธั\n/config - ะะฐัััะพะนะบะธ (ัะพะปัะบะพ ะดะปั ะฐะดะผะธะฝะฐ)"
	}

	msg := tgbotapi.NewMessage(message.Chat.ID, response)
	msg.ParseMode = "Markdown"

	if _, err := bot.Send(msg); err != nil {
		log.Printf("โ ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ: %v", err)
	}
}

func getWelcomeMessage() string {
	return `๐ *ะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั ะฒ 100daysGo ะะตัะตะทะฐะณััะทะบะฐ!*

ะฏ ัะฒะพะน ะฟะพะผะพัะฝะธะบ ะฒ 100-ะดะฝะตะฒะฝะพะผ ัะตะปะปะตะฝะดะถะต ะฟะพ ะธะทััะตะฝะธั Go!

๐ *ะะพัััะฟะฝัะต ะบะพะผะฐะฝะดั:*
/progress - ะขะตะบััะธะน ะดะตะฝั ะธ ะฟัะพะณัะตัั
/system - ะะฝัะพัะผะฐัะธั ะพ ัะธััะตะผะต
/motivation - ะะพัะธะฒะฐัะธะพะฝะฝะพะต ัะพะพะฑัะตะฝะธะต
/help - ะกะฟัะฐะฒะบะฐ

ะะฐะถะดัะน ะดะตะฝั ะฟัะธะฑะปะธะถะฐะตั ัะตะฑั ะบ ัะตะปะธ! ๐ช`
}


func getMotivationMessage() string {
	motivations := []string{
		"๐ฅ ะขั ะดะตะปะฐะตัั ัะพ, ะพ ัะตะผ ะดััะณะธะต ัะพะปัะบะพ ะผะตััะฐัั!",
		"๐ช ะะฐะถะดะฐั ัััะพะบะฐ ะบะพะดะฐ - ัะฐะณ ะบ ะปัััะตะน ะฒะตััะธะธ ัะตะฑั!",
		"๐ ะกะตะณะพะดะฝััะฝะธะต ััะธะปะธั - ะทะฐะฒััะฐัะฝะธะต ะฝะฐะฒัะบะธ!",
		"๐ฏ ะะพะผะฝะธ: ัะบัะฟะตััั ะบะพะณะดะฐ-ัะพ ัะพะถะต ะฑัะปะธ ะฝะพะฒะธัะบะฐะผะธ!",
		"๐ ะขั ะทะฐะผะตะฝัะตัั ะฒัะตะผะตะฝะฝัะต ัะดะพะฒะพะปัััะฒะธั ะฝะฐ ะฒะตัะฝัะต ะฝะฐะฒัะบะธ!",
		"๐ ะฃัะธัััั ะฟัะพะณัะฐะผะผะธัะพะฒะฐัั - ััะพ ะบะฐะบ ะฟะพะปััะธัั ััะฟะตััะธะปั!",
		"๐ก ะะดะตะธ ะฟัะธัะพะดัั ะฒ ะดะตะนััะฒะธะธ, ะฐ ะฝะต ะฒ ะฑะตะทะดะตะนััะฒะธะธ!",
		"๐ ะะฐะถะดัะน ะดะตะฝั ะบะพะดะฐ - ััะพ ะธะฝะฒะตััะธัะธั ะฒ ัะตะฑั!",
		"๐ฑ ะะพัั ะฝะฐัะธะฝะฐะตััั ะทะฐ ะฟัะตะดะตะปะฐะผะธ ะทะพะฝั ะบะพะผัะพััะฐ!",
		"โก ะขะฒะพะน ะผะพะทะณ ัะพะทะดะฐะฝ ะดะปั ัะตัะตะฝะธั ัะปะพะถะฝัั ะทะฐะดะฐั!",
		"๐จ ะัะพะณัะฐะผะผะธัะพะฒะฐะฝะธะต - ััะพ ะธัะบััััะฒะพ ะปะพะณะธะบะธ!",
		"๐ง ะขั ะฝะต ะฟัะพััะพ ััะธัั Go - ัั ัััะพะธัั ัะฒะพั ะฑัะดััะตะต!",
		"๐ ะะธััะธะฟะปะธะฝะฐ ะฟัะตะฒัะฐัะฐะตั ัะฐะปะฐะฝั ะฒ ะผะฐััะตัััะฒะพ!",
		"๐ ะฃััะพ ะฟัะพะณัะฐะผะผะธััะฐ ะฝะฐัะธะฝะฐะตััั ั ะบะพะผะฟะธะปััะธะธ!",
		"๐๏ธ ะะพะด, ะบะพัะพััะน ัั ะฟะธัะตัั ัะตะณะพะดะฝั, ะทะฐะฒััะฐ ััะฐะฝะตั ัะฒะพะธะผ ะฟะพัััะพะปะธะพ!",
		"๐ช ะะธะทะฝั - ััะพ ะบะพะด, ะธ ัั ะตะณะพ ะณะปะฐะฒะฝัะน ะฐััะธัะตะบัะพั!",
		"๐ผ ะะฐะฑะพัะพะดะฐัะตะปะธ ะธััั ัะฐะบะธั ัะตะปะตััััะตะผะปัะฝะฝัั, ะบะฐะบ ัั!",
		"๐ง ะะตะนัะพะฝะฝัะต ะฟััะธ ัะบัะตะฟะปััััั ั ะบะฐะถะดะพะน ัะตััะฝะฝะพะน ะทะฐะดะฐัะตะน!",
		"๐๏ธ ะะพััะพะถะดะตะฝะธะต ะฝะฐ ะณะพัั ะทะฝะฐะฝะธะน ะฝะฐัะธะฝะฐะตััั ั ะฟะตัะฒะพะณะพ ัะฐะณะฐ!",
		"๐ต ะะธัะผ ะบะปะฐะฒะธะฐัััั - ะผัะทัะบะฐ ัะฒะพะตะณะพ ะฟัะพะณัะตััะฐ!",
		"๐ป ะขั ะฝะต ะธะณัะฐะตัั ะฒ ะธะณัั - ัั ัะพะทะดะฐััั ะธั!",
		"๐ซ ะะตั ะฟะพัะฝะพ ะธ ะธะณัะฐะผ - ะดะฐ ะบะพะดั ะธ ัะฐะทะฒะธัะธั!",
		"๐ ะัะธะฑะบะธ - ะฝะต ะฟัะพะฒะฐะป, ะฐ ะฒะพะทะผะพะถะฝะพััั ะฝะฐััะธัััั!",
		"๐ ะะพัะปะต ะดะพะถะดั ะบะพะผะฟะธะปััะธะธ ะฒัะตะณะดะฐ ะฟะพัะฒะปัะตััั ัะฐะดัะณะฐ!",
		"โ Go - ัะฒะพะน ัะบะพัั ะฒ ะผะธัะต ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธั!",
		"๐ฒ ะะธัะบัะน ะฒ ะบะพะดะต, ะฐ ะฝะต ะฒ ะฐะทะฐััะฝัั ะธะณัะฐั!",
		"๐ ะัะฑะพะฒั ะบ ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธั ะดะปะธััั ะดะพะปััะต, ัะตะผ ะบ ะธะณัะฐะผ!",
		"๐ฆ ะะพัะฝัะต ัะตััะธะธ ะบะพะดะฐ ัะดะตะปะฐัั ัะตะฑั ะผัะดัะตะต!",
		"๐ ะะตะณะธ ะบ ัะฒะพะตะน ัะตะปะธ, ะฐ ะฝะต ะพั ะฟัะพะฑะปะตะผ!",
		"๐ช ะฆะธััะพะฒะพะน ัะธัะบ ะถะดัั ัะฒะพะตะณะพ ะฒััััะฟะปะตะฝะธั!",
		"๐ ะขั ะพัะบััะฒะฐะตัั ะดะฒะตัั ะฒ ะผะธั ะฒััะพะบะธั ัะตัะฝะพะปะพะณะธะน!",
		"๐ ะขะฒะพะน ะบะพะด ะผะพะถะตั ะธะทะผะตะฝะธัั ะผะธั!",
		"๐ซ ะะฒัะทะดั align, ะบะพะณะดะฐ ัั ะฟะธัะตัั ัะธัััะน ะบะพะด!",
		"๐ก๏ธ ะขั ะทะฐัะธัะฐะตัั ัะฒะพั ะฒัะตะผั ะพั ัะธััะพะฒัั ะฝะฐัะบะพัะธะบะพะฒ!",
		"๐ ะะฐะถะดะฐั ัะฐะฑะพัะฐััะฐั ะฟัะพะณัะฐะผะผะฐ - ะฟะพะดะฐัะพะบ ัะตะฑะต!",
		"โ๏ธ ะะฐะปะฐะฝั ะผะตะถะดั ะพะฑััะตะฝะธะตะผ ะธ ะฟัะฐะบัะธะบะพะน - ะบะปัั ะบ ััะฟะตัั!",
		"๐ฎ ะัะดััะตะต ะฟัะธะฝะฐะดะปะตะถะธั ัะตะผ, ะบัะพ ะบะพะดะธั ัะตะณะพะดะฝั!",
		"๐๏ธ ะขั ัััะพะธัั ััะฝะดะฐะผะตะฝั ัะฒะพะตะน ะบะฐััะตัั!",
		"๐ ะะปัะฒะธ ะฟัะพัะธะฒ ัะตัะตะฝะธั ะปะตะฝะธ ะธ ะฟัะพะบัะฐััะธะฝะฐัะธะธ!",
		"๐ฏ ะคะพะบัั ะฝะฐ Go - ัะฒะพะน ัะตะบัะตัะฝัะน ะธะฝััััะผะตะฝั!",
		"๐ฅ ะะทััะฒ ะฟัะพะดัะบัะธะฒะฝะพััะธ ะฝะฐัะธะฝะฐะตััั ั ะพะดะฝะพะณะพ ัะฐะนะปะฐ!",
		"๐ ะขั - ะปะพะบะพะผะพัะธะฒ ัะฒะพะตะณะพ ัะฐะทะฒะธัะธั!",
		"๐ช ะะพะฝะณะปะธััะน ะณะพัััะธะฝะฐะผะธ, ะฐ ะฝะต ะฑะตัะฟะพะปะตะทะฝัะผะธ ะดะตะปะฐะผะธ!",
		"๐ ะะฐััะถะฐะน ัะฒะพะน ะผะพะทะณ ะบะพะดะพะผ, ะฐ ะฝะต ัะฐะทะฒะปะตัะตะฝะธัะผะธ!",
		"๐ ะขั - ัะตะผะฟะธะพะฝ ัะฒะพะตะณะพ ะฒัะตะผะตะฝะธ!",
		"๐ก ะะฐะผะฟะพัะบะฐ ะฝะฐะด ะณะพะปะพะฒะพะน ะทะฐะณะพัะฐะตััั ะพั ะฝะฐะฟััะถะตะฝะธั!",
		"๐จ ะขั - ััะดะพะถะฝะธะบ, ะฐ ะบะพะด - ัะฒะพะธ ะบัะฐัะบะธ!",
		"๐ ะะฐะฟััะบะฐะน ัะฐะบะตัั ะบะพะดะฐ ะฒ ะบะพัะผะพั ะฒะพะทะผะพะถะฝะพััะตะน!",
		"๐ฆธ ะขั - ััะฟะตัะณะตัะพะน ัะฒะพะตะณะพ ะพะฑััะตะฝะธั!",
		"๐ ะขะฒะพะน ะณัะฐัะธะบ ัะพััะฐ ัััะตะผะธััั ะบ ะฑะตัะบะพะฝะตัะฝะพััะธ!",
		"๐ช ะคะพะบัั ั ะบะพะดะพะผ - ัะฐะผัะน ัะตะฝะฝัะน ัััะบ!",
		"๐ ะะปะผะฐะท ัะฒะพะตะณะพ ะผะฐััะตัััะฒะฐ ัะปะธััะตััั ั ะบะฐะถะดะพะน ะพัะธะฑะบะพะน!",
		"๐ฑ ะกะตะผะตะฝะฐ ะทะฝะฐะฝะธะน ะดะฐัั ะฟะปะพะดั ะฒะพะทะผะพะถะฝะพััะตะน!",
		"โก ะะพะปะฝะธะตะฝะพัะฝัะต ะฝะตะนัะพะฝะฝัะต ัะฒัะทะธ - ัะฒะพั ะฟัะตะธะผััะตััะฒะพ!",
		"๐๏ธ ะะตััะธะฝะฐ Mount Go ะฟะพะบะพัะธััั ัะฟะพัะฝัะผ!",
		"๐ต ะกะธะผัะพะฝะธั ะบะพะดะฐ ะทะฒััะธั ะปัััะต ะปัะฑะพะณะพ ัะฐัะฝะดััะตะบะฐ!",
		"๐ง ะะฝััััะผะตะฝัั Go - ัะฒะพะน ะฝะฐะฑะพั ััะฟะตัะณะตัะพั!",
		"๐ผ ะะตะทัะผะต ะฝะฐะฟะพะปะฝัะตััั ัะตะฐะปัะฝัะผะธ ะฟัะพะตะบัะฐะผะธ!",
		"๐ ะะฐััะฒะตั ะบะฐััะตัั ะฝะฐัะธะฝะฐะตััั ั ัััะตะฝะฝะตะณะพ ะบะพะดะฐ!",
		"๐๏ธ ะะฒะพะฝะพะบ ะบะพะผะฟะธะปััะธะธ - ะปัััะธะน ะฑัะดะธะปัะฝะธะบ!",
		"๐ฏ ะฆะตะปััั ะฒ Senior Developer!",
		"๐ซ ะะตั - ะดะธัััะฐะบัะธัะผ, ะดะฐ - ะบะพะฝัะตะฝััะฐัะธะธ!",
		"๐ก ะะดะตะธ ะฟัะธัะพะดัั ะฒ ะณะพะปะพะฒั, ะฟะพะปะฝัั ะบะพะดะฐ!",
		"๐๏ธ ะััะธัะตะบัััะฐ ัะฒะพะตะณะพ ะฑัะดััะตะณะพ ัััะพะธััั ัะตะณะพะดะฝั!",
		"๐ ะขั ัััะพะธัั ะผะพัั ะผะตะถะดั ะผะตััะพะน ะธ ัะตะฐะปัะฝะพัััั!",
		"โ ะะตัะถะธัั ะบัััะฐ - 100 ะดะฝะตะน ะดะพ ััะฟะตัะฐ!",
		"๐ช ะะฐัะฐะดะธะณะผั ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธั - ัะฒะพะธ ัะธัะบะพะฒัะต ะฝะพะผะตัะฐ!",
		"๐ ะัะธ ะฑะฐะณะธ ะฒ ะบะพะดะต, ะฐ ะฝะต ะพะฟัะฐะฒะดะฐะฝะธั!",
		"๐ ะะฐะทะฝะพะพะฑัะฐะทะธะต ัะตัะฝะพะปะพะณะธะน - ัะฒะพั ะฟะฐะปะธััะฐ!",
		"๐ป ะะพััะฑัะบ - ัะฒะพั ะผะฐััะตััะบะฐั!",
		"๐ ะกัะฐััะฐะฟ ัะฒะพะตะน ะถะธะทะฝะธ ัะถะต ะทะฐะฟััะตะฝ!",
		"๐ฆ ะะพัะฝัะต ัะพะฒั ะบะพะดะฐ ะฒะธะดัั ะฑะพะปััะต!",
		"๐ ะขัะพัะตะน ัััะดะพััััะพะนััะฒะฐ ะถะดัั ัะตะฑั!",
		"๐ ะกะฐะผะพะดะธััะธะฟะปะธะฝะฐ - ัะฒะพะน ัะฐะผัะน ัะตะฝะฝัะน ะฝะฐะฒัะบ!",
		"๐ ะกะตััะธะฝะณ ะฝะฐ ะฒะพะปะฝะฐั ัะตัะฝะพะปะพะณะธะน - ัะฒะพะน ััะธะปั!",
		"๐ฏ ะคะพะบัั ะฝะฐ ัะตะทัะปััะฐัะต, ะฐ ะฝะต ะฝะฐ ัััะดะฝะพัััั!",
		"โก ะญะฝะตัะณะธั ะบะพะดะฐ ะทะฐััะถะฐะตั ะฝะฐ ะฒะตัั ะดะตะฝั!",
		"๐๏ธ ะะฐะถะดะฐั ัะตััะฝะฝะฐั ะทะฐะดะฐัะฐ - ะฝะพะฒัะน ะฟะธะบ!",
		"๐ ะะปัั ะบ ััะฟะตัั - ะฟะพััะพัะฝััะฒะพ!",
		"๐ช ะะธะทะฝั ะฟัะพะณัะฐะผะผะธััะฐ - ัะธัะบ, ะฐ ัั - ะณะปะฐะฒะฝัะน ะฐััะธัั!",
		"๐ก ะัะฒะตัะฐะน ะฟััั ะบะพะดะพะผ!",
		"๐ ะะพัะผะพั ะฐะปะณะพัะธัะผะพะฒ ะถะดัั ะฟะตัะฒะพะพัะบััะฒะฐัะตะปะตะน!",
		"๐๏ธ ะะตะผะพะฝัะธััะน ะฝะตะนัะพะฝะฝัะต ะฟััะธ ะบะพะดะพะผ!",
		"๐ฑ ะััะฐัะธะฒะฐะน ัะฐะด ะทะฝะฐะฝะธะน!",
		"โ๏ธ ะะฐะปะฐะฝัะธััะน ะผะตะถะดั ัะตะพัะธะตะน ะธ ะฟัะฐะบัะธะบะพะน!",
		"๐ต ะะธัะผ ะฟัะพะณัะตััะฐ ััะบะพััะตััั!",
		"๐ฎ ะฅััััะฐะปัะฝัะน ัะฐั ะฟะพะบะฐะทัะฒะฐะตั ัะตะฑั - ััะฟะตัะฝะพะณะพ ัะฐะทัะฐะฑะพััะธะบะฐ!",
		"๐ ะขั ะฑัััั ัะตะบะพัะดั ะปะธัะฝะพะณะพ ัะพััะฐ!",
		"๐ช ะัััั ะบะพะดะธะฝะณะฐ ะบะฐัะฐัััั ะตะถะตะดะฝะตะฒะฝะพ!",
		"๐ Express to Go Developer!",
		"๐จ ะขะฒะพัะธ ัะตะดะตะฒัั ะบะพะดะฐ!",
		"๐ ะะพะฒัะน ะดะตะฝั - ะฝะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ!",
		"๐ ะะฐัะฐัะตะนะบะฐ ะผะพัะธะฒะฐัะธะธ ะทะฐััะถะตะฝะฐ ะฝะฐ 100%!",
		"๐ ะขั - ะฑัะธะปะปะธะฐะฝั ะฒ ะผะธัะต ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธั!",
		"๐ ะะฐะฟััะบะฐะน ะผะธััะธะธ ะบะพะดะฐ!",
		"๐ฆธ ะกัะฟะตััะธะปะฐ ะฟัะพะณัะฐะผะผะธััะฐ - ัะฟะพัััะฒะพ!",
		"๐ ะะธะฑะปะธะพัะตะบะฐ ัะฒะพะธั ะทะฝะฐะฝะธะน ะฟะพะฟะพะปะฝัะตััั!",
		"๐ฏ ะะพะฟะฐะดะฐะน ะฒ ัะตะปั ะบะฐะถะดะพะน ัััะพัะบะพะน ะบะพะดะฐ!",
		"โก ะฃัะบะพััะนัั ั ะบะฐะถะดัะผ ะดะฝัะผ!",
		"๐๏ธ ะะพะบะพััะน ะฒะตััะธะฝั ัะปะพะถะฝะพััะธ!",
		"๐ก ะะฝัะฐะนัั ะฟัะธัะพะดัั ะฒะพ ะฒัะตะผั ะบะพะดะธะฝะณะฐ!",
		"๐ช ะะฐัะฝะฐะฒะฐะป ัะตัะฝะพะปะพะณะธะน ะถะดัั ัะตะฑั!",
		"๐ซ ะกัะพะฟ ะฟัััะพะน ััะฐัะต ะฒัะตะผะตะฝะธ!",
		"๐ป ะะปะฐะฒะธะฐัััะฐ - ัะฒะพะน ะปัััะธะน ะดััะณ!",
		"๐ ะขั ะผะตะฝัะตัั ัะธััะพะฒะพะน ะปะฐะฝะดัะฐัั!",
	}

	// ะะตะฝะตัะธััะตะผ ัะปััะฐะนะฝัะน ะธะฝะดะตะบั
	index := rand.Intn(len(motivations))
	return fmt.Sprintf("๐ซ *ะะพัะธะฒะฐัะธั ะดะฝั:*\n\n%s", motivations[index])
}

func getConfigInfo(config *Config) string {
	return fmt.Sprintf(`โ๏ธ *ะะพะฝัะธะณััะฐัะธั ะฑะพัะฐ:*

๐ค ะะตะถะธะผ ะพัะปะฐะดะบะธ: %v
๐ ะะฐัะฐ ะฝะฐัะฐะปะฐ: %s
๐ค Admin ID: %d
`, config.DebugMode, config.ChallengeStart, config.AdminID)
}
