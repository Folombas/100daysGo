package main

import (
	"fmt"
	"sync"
	"sync/atomic"
	"time"
)

// ========== –≠–¢–ê–ü 1: –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ì–û–ù–ö–ò –î–ê–ù–ù–´–• ==========
func raceCounter(days int) int {
	var wg sync.WaitGroup
	counter := 0
	// –ó–∞–ø—É—Å–∫–∞–µ–º 10 –≥–æ—Ä—É—Ç–∏–Ω, –∫–æ—Ç–æ—Ä—ã–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Å—á—ë—Ç—á–∏–∫
	for i := 0; i < 10; i++ {
		wg.Add(1)
		go func() {
			defer wg.Done()
			for j := 0; j < days; j++ {
				counter++ // üî• –ì–û–ù–ö–ê! –ù–µ—Å–∫–æ–ª—å–∫–æ –≥–æ—Ä—É—Ç–∏–Ω –ø–∏—à—É—Ç –≤ counter –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
			}
		}()
	}
	wg.Wait()
	return counter
}

// ========== –≠–¢–ê–ü 2: –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø –° MUTEX ==========
func safeCounter(days int) int {
	var wg sync.WaitGroup
	var mu sync.Mutex
	counter := 0
	for i := 0; i < 10; i++ {
		wg.Add(1)
		go func() {
			defer wg.Done()
			for j := 0; j < days; j++ {
				mu.Lock()
				counter++ // ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ –º—å—é—Ç–µ–∫—Å–æ–º
				mu.Unlock()
			}
		}()
	}
	wg.Wait()
	return counter
}

// ========== –≠–¢–ê–ü 3: –ê–¢–û–ú–ê–†–ù–ê–Ø –í–ï–†–°–ò–Ø (–î–õ–Ø –°–†–ê–í–ù–ï–ù–ò–Ø) ==========
func atomicCounter(days int) int32 {
	var wg sync.WaitGroup
	var counter int32 = 0
	for i := 0; i < 10; i++ {
		wg.Add(1)
		go func() {
			defer wg.Done()
			for j := 0; j < days; j++ {
				atomic.AddInt32(&counter, 1) // ‚úÖ –ë–µ–∑ –≥–æ–Ω–∫–∏, –∞—Ç–æ–º–∞—Ä–Ω–æ
			}
		}()
	}
	wg.Wait()
	return counter
}

func main() {
	// –î–∞—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è CapCut ‚Äî 18 —è–Ω–≤–∞—Ä—è 2026
	startDate := time.Date(2026, time.January, 18, 0, 0, 0, 0, time.UTC)
	daysSince := int(time.Since(startDate).Hours() / 24)

	fmt.Println("üî• –î–ï–ù–¨ 99: –î–ï–¢–ï–ö–¢–ò–†–£–ï–ú –ì–û–ù–ö–ò –í –ö–û–ù–ö–£–†–ï–ù–¢–ù–û–ú –ö–û–î–ï üî•")
	fmt.Println("==================================================")
	fmt.Printf("üìÖ –°–µ–≥–æ–¥–Ω—è: %s\n", time.Now().Format("2006-01-02"))
	fmt.Printf("‚öîÔ∏è  –î–Ω–µ–π –±–µ–∑ CapCut: %d\n\n", daysSince)

	// === –ó–ê–ü–£–°–ö –° –ì–û–ù–ö–û–ô ===
	fmt.Println("üö® –≠–¢–ê–ü 1: –ó–∞–ø—É—Å–∫ —Å –ì–û–ù–ö–û–ô –¥–∞–Ω–Ω—ã—Ö (race condition)‚Ä¶")
	raceResult := raceCounter(daysSince)
	fmt.Printf("   ‚û§ –†–µ–∑—É–ª—å—Ç–∞—Ç (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å %d): %d ‚Äî –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!\n", daysSince*10, raceResult)
	fmt.Println("   ‚ö†Ô∏è  –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—É —Å —Ñ–ª–∞–≥–æ–º -race, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.")

	// === –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø ===
	fmt.Println("\nüîí –≠–¢–ê–ü 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å Mutex‚Ä¶")
	safeResult := safeCounter(daysSince)
	fmt.Printf("   ‚û§ –†–µ–∑—É–ª—å—Ç–∞—Ç: %d ‚úÖ ‚Äî –í–ï–†–ù–û, –≥–æ–Ω–∫–∏ –Ω–µ—Ç.\n", safeResult)

	// === –ê–¢–û–ú–ê–†–ù–ê–Ø –í–ï–†–°–ò–Ø ===
	fmt.Println("\n‚öõÔ∏è –≠–¢–ê–ü 3: –ê—Ç–æ–º–∞—Ä–Ω—ã–π —Å—á—ë—Ç—á–∏–∫‚Ä¶")
	atomicResult := atomicCounter(daysSince)
	fmt.Printf("   ‚û§ –†–µ–∑—É–ª—å—Ç–∞—Ç: %d ‚úÖ ‚Äî –±—ã—Å—Ç—Ä–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ.\n", atomicResult)

	// === –ú–û–¢–ò–í–ê–¶–ò–Ø –ò –ì–ï–ô–ú–ò–§–ò–ö–ê–¶–ò–Ø ===
	fmt.Println("\nüéÆ –ü–†–û–ö–ê–ß–ö–ê –ü–ï–†–°–û–ù–ê–ñ–ê: –ì–û–ù–ö–ê –° –°–û–ë–û–ô üéÆ")
	achievements := []string{
		"üèÜ –î–µ—Ç–µ–∫—Ç–∏–≤ –≥–æ–Ω–æ–∫: –æ–±–Ω–∞—Ä—É–∂–∏–ª race condition",
		"üîí –ú–∞—Å—Ç–µ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: –ø—Ä–∏—Ä—É—á–∏–ª –º—å—é—Ç–µ–∫—Å",
		"‚öõÔ∏è –ê—Ç–æ–º–Ω—ã–π —Å—Ç—Ä–∞—Ç–µ–≥: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª atomic",
		"üìö –°–ª–∞–π—Å—ã –∏ –º–∞—Å—Å–∏–≤—ã –ø–æ–∫–æ—Ä–µ–Ω—ã",
		"üß† –ì–æ—Ä—É—Ç–∏–Ω—ã –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º",
	}
	for i, ach := range achievements {
		fmt.Printf("   %d. %s [%s]\n", i+1, ach, "‚úÖ –†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–ù–û")
	}
	fmt.Printf("\nüí™ –î–æ—Å—Ç–∏–≥–Ω—É—Ç %d-–π –¥–µ–Ω—å —Ñ–æ–∫—É—Å–∞! +100 –∫ —Å–∏–ª–µ –≤–æ–ª–∏.\n", daysSince)

	// === 10 –ú–û–¢–ò–í–ê–¶–ò–û–ù–ù–´–• –§–†–ê–ó ===
	fmt.Println("\n‚ú® 10 –ó–ê–†–Ø–ñ–ê–Æ–©–ò–• –§–†–ê–ó –ù–ê –°–ï–ì–û–î–ù–Ø:")
	phrases := []string{
		"1. –ì–æ–Ω–∫–∏ –≤ –∫–æ–¥–µ ‚Äî –∫–∞–∫ —Å–æ–±–ª–∞–∑–Ω —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å CapCut: –∏—Ö –Ω—É–∂–Ω–æ –≤–æ–≤—Ä–µ–º—è –æ—Ç–ª–∞–≤–ª–∏–≤–∞—Ç—å.",
		"2. –¢–≤–æ–π –º–æ–∑–≥ ‚Äî –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä. –ù–∞—É—á–∏ –µ–≥–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.",
		"3. –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –±–µ–∑ –º–æ–Ω—Ç–∞–∂–∞ ‚Äî —ç—Ç–æ –∞—Ç–æ–º–∞—Ä–Ω—ã–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç –∫ —Ç–≤–æ–µ–π –∫–∞—Ä—å–µ—Ä–µ.",
		"4. Go-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ —Ç–æ—Ç, –∫—Ç–æ –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç –≥–æ–Ω–æ–∫, –∞ —Ç–æ—Ç, –∫—Ç–æ –∏—Ö –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç –∏ —Ñ–∏–∫—Å–∏—Ç.",
		"5. –°–Ω–µ–≥ –∑–∞ –æ–∫–Ω–æ–º, —á–∞–π –Ω–∞ —Å—Ç–æ–ª–µ, race detector –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ–µ —É—Ç—Ä–æ.",
		"6. –ù–µ –æ—Ç–≤–ª–µ–∫–∞–π—Å—è –Ω–∞ –≤–∏–¥–µ–æ–∏–≥—Ä—ã: —Ç–≤–æ—è –≥–ª–∞–≤–Ω–∞—è –∏–≥—Ä–∞ ‚Äî ¬´–ü–æ–±–µ–¥–∏ —Å–∏–Ω–¥—Ä–æ–º —Å–∞–º–æ–∑–≤–∞–Ω—Ü–∞¬ª.",
		"7. –°–ª–∞–π—Å—ã –∏ –º–∞—Å—Å–∏–≤—ã ‚Äî –∫–∞–∫ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏: —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã, –Ω–æ —Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è.",
		"8. –ì–æ—Ä—É—Ç–∏–Ω–∞ –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ‚Äî –∫–∞–∫ –ø—Ä–æ–≥—É–ª–∫–∞ –ø–æ –ø—Ä–æ–º–∑–æ–Ω–µ –±–µ–∑ –∫–∞—Ä—Ç—ã: –≤–µ—Å–µ–ª–æ, –Ω–æ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ.",
		"9. –¢—ã —É–∂–µ –ø—Ä–æ—à—ë–ª 99 —É—Ä–æ–≤–Ω–µ–π. –û—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω ‚Äî –∏ —Ç—ã –≤–æ–π–¥—ë—à—å –≤ Go-—ç–ª–∏—Ç—É.",
		"10. –ö–∞–ø–∏—Ç–∞–Ω—ã –Ω–µ —Ç–æ–Ω—É—Ç ‚Äî –æ–Ω–∏ —É—á–∞—Ç—Å—è –ø–ª–∞–≤–∞—Ç—å –≤ –±—É—Ä–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö –¥–∞–Ω–Ω—ã—Ö.",
	}
	for _, p := range phrases {
		fmt.Println(p)
	}

	// === –ü–û–•–í–ê–õ–ê ===
	fmt.Printf("\nüåü –ì–û–®–ê! –¢—ã –≤—ã–¥–µ—Ä–∂–∞–ª %d –¥–Ω–µ–π –±–µ–∑ CapCut! –≠—Ç–æ –∫–æ–ª–æ—Å—Å–∞–ª—å–Ω–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞.\n", daysSince)
	fmt.Println("–°–µ–≥–æ–¥–Ω—è —Ç—ã –Ω–µ –ø–æ–¥–¥–∞–ª—Å—è —Å–æ–±–ª–∞–∑–Ω—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ, –∞ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ—Ö–æ—Ç–∏–ª—Å—è –Ω–∞ –≥–æ–Ω–∫–∏ –≤ –∫–æ–¥–µ.")
	fmt.Println("–¢–≤–æ–π —Å–∫–∏–ª–ª ¬´–î–µ—Ç–µ–∫—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –≥–æ–Ω–∫–∏¬ª –ø–æ–≤—ã—à–µ–Ω –¥–æ —É—Ä–æ–≤–Ω—è ¬´–î–∂—É–Ω–∏–æ—Ä-—Å–µ–Ω—Å–µ–π¬ª!")
	fmt.Println("–ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ ‚Äî —á–µ—Ä–µ–∑ –¥–µ–Ω—å —Ç—ã –≤—Å—Ç—Ä–µ—Ç–∏—à—å Day100 –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–º –≥–µ—Ä–æ–µ–º.")

	// === DISCLAIMER ===
	fmt.Println("\n=== DISCLAIMER ===")
	fmt.Println("–í—Å–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ ¬´–ì–æ—à–∏–Ω—ã—Ö Daily Code Life Story¬ª –≤—ã–¥—É–º–∞–Ω—ã.")
	fmt.Println("–°—é–∂–µ—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –∏ –º–µ—Ç–∞—Ñ–æ—Ä –≤ —É—á–µ–±–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ.")
	fmt.Println("–õ—é–±—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ª—é–¥—å–º–∏ –∏–ª–∏ —Å–æ–±—ã—Ç–∏—è–º–∏ —Å–ª—É—á–∞–π–Ω—ã.")
	fmt.Println("CapCut ‚Äî –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä, –Ω–æ —Å–µ–π—á–∞—Å –Ω–µ –≤—Ä–µ–º—è –µ–≥–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å.")
	fmt.Println("–ö–∞—à–∞ ¬´–ì–µ—Ä–∫—É–ª–µ—Å¬ª –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –≤–∫—É—Å–Ω–∞ –∏ –ø–æ–ª–µ–∑–Ω–∞.")
}
